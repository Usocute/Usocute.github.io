{
    "version": "https://jsonfeed.org/version/1",
    "title": "尺萤之光 • All posts by \"学习笔记\" category",
    "description": "一个收藏回忆记录成长的地方...",
    "home_page_url": "https://miraitowa.cc",
    "items": [
        {
            "id": "https://miraitowa.cc/post/68889350.html",
            "url": "https://miraitowa.cc/post/68889350.html",
            "title": "yarn和npm常用命令",
            "date_published": "2021-01-22T16:00:00.000Z",
            "content_html": "<h2 id=\"yarn和npm常用命令对比\">yarn和npm常用命令对比</h2>\n<table>\n<thead>\n<tr>\n<th>作用</th>\n<th>npm</th>\n<th>yarn</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>安装</td>\n<td>npm install/i</td>\n<td>yarn</td>\n</tr>\n<tr>\n<td>卸载</td>\n<td>npm unintall/un xxx</td>\n<td>yarn remove xxx</td>\n</tr>\n<tr>\n<td>全局安装</td>\n<td>npm install/i xxx --global/-g</td>\n<td>yarn global add xxx</td>\n</tr>\n<tr>\n<td>安装包</td>\n<td>npm install/i xxx --save/-S</td>\n<td>yarn add xxx</td>\n</tr>\n<tr>\n<td>开发模式安装包</td>\n<td>npm install/i xxx --save-dev/-D</td>\n<td>yarn add xxx -dev/-D</td>\n</tr>\n<tr>\n<td>更新</td>\n<td>npm update</td>\n<td>yarn upgrade</td>\n</tr>\n<tr>\n<td>全局更新</td>\n<td>npm update -g</td>\n<td>yarn global upgrade</td>\n</tr>\n<tr>\n<td>清除缓存</td>\n<td>npm cache clean</td>\n<td>yarn cache clean</td>\n</tr>\n<tr>\n<td>重装</td>\n<td>rm -rf node_modules &amp;&amp; npm install</td>\n<td>yarn upgrade</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"npm-install-常用命令\">npm install 常用命令</h2>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>npm install moduleName</td>\n<td>安装模块到项目目录</td>\n</tr>\n<tr>\n<td>npm install -g moduleName</td>\n<td><code>-g</code> 意思是将模块安装到全局</td>\n</tr>\n<tr>\n<td>npm install --save moduleName</td>\n<td><code>--save</code> 的意思是将模块安装到项目目录下，并在package文件的<code>dependencies</code>节点写入依赖。</td>\n</tr>\n<tr>\n<td>npm install --save-dev moduleName</td>\n<td><code>--save-dev</code> 的意思是将模块安装到项目目录下，并在package文件的<code>devDependencies</code>节点写入依赖。</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "npm",
                "yarn"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/643e8ed0.html",
            "url": "https://miraitowa.cc/post/643e8ed0.html",
            "title": "常用的Git操作",
            "date_published": "2021-01-21T05:06:41.000Z",
            "content_html": "<h2 id=\"Git-Push\">Git Push</h2>\n<div class=\"tabs\" id=\"test1\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#test1-1\">方法一</button></li><li class=\"tab\"><button type=\"button\" data-href=\"#test1-2\">方法二</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"test1-1\"><p><strong>此方法适用于已经在Github创建好仓库</strong></p>\n<ul>\n<li>把Github上面的仓库克隆到本地</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/Github用户名/仓库名.git</span><br></pre></td></tr></table></figure>\n<ul>\n<li>进入项目文件夹</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> 项目名</span><br></pre></td></tr></table></figure>\n<ul>\n<li>把文件夹下面的文件都添加进来</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br></pre></td></tr></table></figure>\n<ul>\n<li>提交信息</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit <span class=\"literal\">-m</span> <span class=\"string\">&quot;xxxxxx&quot;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>把本地仓库push到github上面，此步骤需要输入帐号和密码</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push <span class=\"literal\">-u</span> origin master(<span class=\"number\">2020</span> 年 <span class=\"number\">10</span> 月 <span class=\"number\">1</span> 日起，在 Github 平台上创建的所有新的源代码仓库将默认命名为 <span class=\"string\">&quot;main&quot;</span> ，不再是原先的 <span class=\"string\">&quot;master&quot;</span> )</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div><div class=\"tab-item-content\" id=\"test1-2\"><p><strong>本方法需要先创建一个本地的版本库</strong></p>\n<ul>\n<li>通过命令行在桌面新建一个test文件夹</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdar test</span><br></pre></td></tr></table></figure>\n<ul>\n<li>通过init把这个文件夹变成Git可管理的仓库</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>把你的项目粘贴到这个本地Git仓库里面</p>\n</li>\n<li>\n<p>粘贴后你可以通过<code>git status</code>来查看你当前的状态</p>\n</li>\n<li>\n<p>把刚才复制过来的项目全部添加到仓库</p>\n</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br></pre></td></tr></table></figure>\n<ul>\n<li>提交到本地缓冲(注释？)</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit <span class=\"literal\">-m</span> <span class=\"string\">&quot;xxxxxx&quot;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>在Github上创建好Git仓库</li>\n<li>将本地仓库的代码提交远程github的仓库</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin https://github.com/Github用户名/仓库名.git</span><br></pre></td></tr></table></figure>\n<ul>\n<li>将远程仓库的代码 push到master分支上</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- 由于新建的远程仓库是空的  所以要加上<span class=\"literal\">-u</span>这个参数</span><br><span class=\"line\">git push <span class=\"literal\">-u</span> origin master</span><br><span class=\"line\"></span><br><span class=\"line\">- 等远程仓库里面有了内容之后，下次再从本地库上传内容的时候不需要了</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>\n<h2 id=\"Git-版本发布\">Git-版本发布</h2>\n<div class=\"tabs\" id=\"\"><ul class=\"nav-tabs\"><li class=\"tab active\"><button type=\"button\" data-href=\"#-1\">Git-版本发布</button></li></ul><div class=\"tab-contents\"><div class=\"tab-item-content active\" id=\"-1\"><ul>\n<li>创建Github一个版本发布</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag</span><br><span class=\"line\">git tag <span class=\"literal\">-a</span> v1.<span class=\"number\">0.0</span> <span class=\"literal\">-m</span> <span class=\"string\">&quot;xxxxxx&quot;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>查看某标签的信息</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git show v1.<span class=\"number\">0.0</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>推送到远程库</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin v1.<span class=\"number\">0.0</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>删除标签</li>\n</ul>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag <span class=\"literal\">-d</span> v1.<span class=\"number\">0.0</span></span><br></pre></td></tr></table></figure><button type=\"button\" class=\"tab-to-top\" aria-label=\"scroll to top\"><i class=\"fas fa-arrow-up\"></i></button></div></div></div>",
            "tags": [
                "Git",
                "Github"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/fba23db0.html",
            "url": "https://miraitowa.cc/post/fba23db0.html",
            "title": "leetcode-罗马数字转整数",
            "date_published": "2020-10-13T09:59:02.099Z",
            "content_html": "<h2 id=\"罗马数字转整数\">罗马数字转整数</h2>\n<p><strong>罗马数字包含以下七种字符: <code>I</code>， <code>V</code>， <code>X</code>， <code>L</code>，<code>C</code>，<code>D</code> 和 <code>M</code>。</strong></p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">字符          数值</span><br><span class=\"line\">I             1</span><br><span class=\"line\">V             5</span><br><span class=\"line\">X             10</span><br><span class=\"line\">L             50</span><br><span class=\"line\">C             100</span><br><span class=\"line\">D             500</span><br><span class=\"line\">M             1000</span><br></pre></td></tr></table></figure>\n<p><strong>例如， 罗马数字 <code>2</code> 写做 <code>II</code> ，即为两个并列的 <code>1</code>。<code>12</code> 写做 <code>XII</code> ，即为 <code>X + II</code> 。 <code>27</code> 写做  <code>XXVII</code>, 即为 <code>XX + V + II</code> 。</strong></p>\n<p><strong>通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 <code>4</code> 不写做 <code>IIII</code>，而是 <code>IV</code>。数字 <code>1</code> 在数字 <code>5</code> 的左边，所表示的数等于大数 <code>5</code> 减小数 <code>1</code> 得到的数值 <code>4</code> 。同样地，数字 <code>9</code> 表示为 <code>IX</code>。这个特殊的规则只适用于以下六种情况：</strong></p>\n<p><code>I</code> 可以放在 <code>V (5)</code> 和 <code>X (10)</code> 的左边，来表示 <code>4</code> 和 <code>9</code>。<br>\n<code>X</code> 可以放在 <code>L (50)</code> 和 <code>C (100)</code> 的左边，来表示 <code>40</code> 和 <code>90</code>。 <br>\n<code>C</code> 可以放在 <code>D (500)</code> 和 <code>M (1000)</code> 的左边，来表示 <code>400</code>和 <code>900</code>。<br>\n给定一个罗马数字，将其转换成整数。输入确保在 <code>1</code> 到 <code>3999</code>的范围内。</p>\n<h4 id=\"示例-1\">示例 1:</h4>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: &quot;III&quot;</span><br><span class=\"line\">输出: 3</span><br></pre></td></tr></table></figure>\n<h4 id=\"示例-2\">示例 2:</h4>\n<figure class=\"highlight makefile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">输入: &quot;IV&quot;</span></span><br><span class=\"line\"><span class=\"section\">输出: 4</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"示例-3\">示例 3:</h4>\n<figure class=\"highlight makefile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">输入: &quot;IX&quot;</span></span><br><span class=\"line\"><span class=\"section\">输出: 9</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"示例-4\">示例 4:</h4>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: <span class=\"string\">&quot;LVIII&quot;</span></span><br><span class=\"line\">输出: <span class=\"number\">58</span></span><br><span class=\"line\">解释: L = <span class=\"number\">50</span>, V= <span class=\"number\">5</span>, III = <span class=\"number\">3.</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"示例-5\">示例 5:</h4>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入: <span class=\"string\">&quot;MCMXCIV&quot;</span></span><br><span class=\"line\">输出: <span class=\"number\">1994</span></span><br><span class=\"line\">解释: M = <span class=\"number\">1000</span>, CM = <span class=\"number\">900</span>, XC = <span class=\"number\">90</span>, IV = <span class=\"number\">4.</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"提示：\">提示：</h4>\n<ul>\n<li>题目所给测试用例皆符合罗马数字书写规则，不会出现跨位等情况。</li>\n<li>IC 和 IM 这样的例子并不符合题目要求，<code>49</code> 应该写作 <code>XLIX</code>，<code>999</code> 应该写作 <code>CMXCIX</code> 。</li>\n<li>关于罗马数字的详尽书写规则，可以参考<a href=\"https://b2b.partcommunity.com/community/knowledge/zh_CN/detail/10753/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97#knowledge_article\">罗马数字 - Mathematics</a>。</li>\n</ul>\n<h2 id=\"解题思路\">解题思路</h2>\n<p><strong>仔细分析罗马数字的规律，会发现，罗马字母(<code>XII</code>)正常是从左到右按从大到小排列，当代表小数字(<code>I</code>)的字母在代表大数字的字母(<code>V</code>)左边时，这意味着两个字母代表一个数，而且是大数字减小数字的最终结果（<code>V-I</code>）。</strong></p>\n<p><strong>所以，在做计算时，只需遍历判断下标为<code>i</code>的字母是否大于下标为<code>i+1</code>的字母，如果大于，则相加，如果小于，则需要减去当前这个数。</strong></p>\n<h4 id=\"代码\">代码</h4>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">s</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> romanToInt = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;I&#x27;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;V&#x27;</span>: <span class=\"number\">5</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;X&#x27;</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;L&#x27;</span>: <span class=\"number\">50</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;C&#x27;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;D&#x27;</span>: <span class=\"number\">500</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;M&#x27;</span>: <span class=\"number\">1000</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">0</span>, len=s.length; i&lt;len; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> left = s[i],</span><br><span class=\"line\">            right = s[i+<span class=\"number\">1</span>],</span><br><span class=\"line\">            newNum = obj[left]&lt;obj[right]? <span class=\"number\">0</span> - obj[left]: obj[left];</span><br><span class=\"line\">        num += newNum</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> num;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "算法",
                "leetcode",
                "javascript"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/87f78bf4.html",
            "url": "https://miraitowa.cc/post/87f78bf4.html",
            "title": "MySQL 触发器",
            "date_published": "2020-09-30T07:01:04.000Z",
            "content_html": "<h2 id=\"MySQL-触发器\">MySQL 触发器</h2>\n<h4 id=\"触发器定义与用法实例\">触发器定义与用法实例</h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> 触发器名称             <span class=\"comment\">--触发器必须有名字，最多64个字符，可能后面会附有分隔符.它和MySQL中其他对象的命名方式基本相象.</span></span><br><span class=\"line\">&#123; <span class=\"keyword\">BEFORE</span> | <span class=\"keyword\">AFTER</span> &#125;                   <span class=\"comment\">--触发器有执行的时间设置：可以设置为事件发生前或后。</span></span><br><span class=\"line\">&#123; <span class=\"keyword\">INSERT</span> | <span class=\"keyword\">UPDATE</span> | <span class=\"keyword\">DELETE</span> &#125;         <span class=\"comment\">--同样也能设定触发的事件：它们可以在执行insert、update或delete的过程中触发。</span></span><br><span class=\"line\"><span class=\"keyword\">ON</span> 表名称                            <span class=\"comment\">--触发器是属于某一个表的:当在这个表上执行插入、 更新或删除操作的时候就导致触发器的激活. 我们不能给同一张表的同一个事件安排两个触发器。</span></span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span>                         <span class=\"comment\">--触发器的执行间隔：FOR EACH ROW子句通知触发器 每隔一行执行一次动作，而不是对整个表执行一次。</span></span><br><span class=\"line\">&lt;触发器<span class=\"keyword\">SQL</span>语句&gt;                      <span class=\"comment\">--触发器包含所要触发的SQL语句：这里的语句可以是任何合法的语句， 包括复合语句，但是这里的语句受的限制和函数的一样。</span></span><br></pre></td></tr></table></figure>\n<p><strong>实例准备工作</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表tab1</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tab1(</span><br><span class=\"line\">  tab1_id <span class=\"built_in\">varchar</span>(<span class=\"number\">11</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 创建表tab2</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> tab2;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tab2(</span><br><span class=\"line\">  tab2_id <span class=\"built_in\">varchar</span>(<span class=\"number\">11</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实例1：新增一条，触发另外一张表的新增</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建触发器:t_afterinsert_on_tab1</span></span><br><span class=\"line\"><span class=\"comment\">-- 作用：增加tab1表记录后自动将记录增加到tab2表中</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> t_afterinsert_on_tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> t_afterinsert_on_tab1</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">ON</span> tab1</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">   <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tab2(tab2_id) <span class=\"keyword\">values</span>(new.tab1_id);</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 测试一下</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tab1(tab1_id) <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;0001&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 看看结果</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab2</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实例2：删除一条，触发另外一张表的删除</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建触发器:t_afterdelete_on_tab1</span></span><br><span class=\"line\"><span class=\"comment\">-- 作用：删除tab1表记录后自动将tab2表中对应的记录删去</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> t_afterdelete_on_tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> t_afterdelete_on_tab1</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">DELETE</span> <span class=\"keyword\">ON</span> tab1</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">   <span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> tab2 <span class=\"keyword\">where</span> tab2_id=old.tab1_id;</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 测试一下</span></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> tab1 <span class=\"keyword\">WHERE</span> tab1_id=<span class=\"string\">&#x27;0001&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 看看结果</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab2;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实例3：更新一条，触发另外一张表的更新</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建触发器:t_afterupdate_on_tab1</span></span><br><span class=\"line\"><span class=\"comment\">-- 作用：修改tab1表记录后自动将tab2表中对应的记录更新</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> t_afterupdate_on_tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> t_afterupdate_on_tab1</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">UPDATE</span> <span class=\"keyword\">ON</span> tab1</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">   <span class=\"keyword\">update</span> tab2 <span class=\"keyword\">set</span> tab2_id=new.tab1_id <span class=\"keyword\">where</span> tab2_id=old.tab1_id;</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 测试一下</span></span><br><span class=\"line\"><span class=\"keyword\">update</span> tab1 <span class=\"keyword\">set</span> tab1_id=<span class=\"string\">&#x27;0002&#x27;</span> <span class=\"keyword\">WHERE</span> tab1_id=<span class=\"string\">&#x27;0001&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 看看结果</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab2;</span><br></pre></td></tr></table></figure>\n<h4 id=\"课后习题\">课后习题</h4>\n<blockquote>\n<p>1、在 product 表上分别创建 BEFORE INSERT 、 AFTER UPDATE 和 AFTER DELETE 3 个触<br>\n发器，触发器名称分别为 product_bf_insert 、 product_af_update 和 product_af_del 。执行语句部分都是向 operate 表插入操作方法和操作时间。<br>\n2、对 product 表分别执行 INSERT 、 UPDATE 和 DELETE 操作<br>\n3、删除 product_bf_insert 和 product_af_update 这两个触发器</p>\n</blockquote>\n<h4 id=\"题解代码\">题解代码</h4>\n<p><strong>建立 operate和product表 并向product表中插入数据</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建表 operate</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> <span class=\"string\">`operate`</span>;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`operate`</span> (</span><br><span class=\"line\">  <span class=\"string\">`Op_id`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;编号&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Op_type`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;操作方式&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Op_time`</span> <span class=\"built_in\">time</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;操作时间&#x27;</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`Op_id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`Op_id`</span> (<span class=\"string\">`Op_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 建表 product</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> <span class=\"string\">`product`</span>;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`product`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;产品编号&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;产品名称&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Function`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;产品功能&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Company`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;生产厂家&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Address`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;家庭住址&#x27;</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`id`</span> (<span class=\"string\">`id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> product(<span class=\"keyword\">id</span>,<span class=\"string\">`NAME`</span>,<span class=\"string\">`Function`</span>,Company,Address) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">\t(<span class=\"number\">1</span>,<span class=\"string\">&#x27;Strawberry&#x27;</span>,<span class=\"string\">&#x27;通便&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;北京&#x27;</span>),</span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;Watermelon&#x27;</span>,<span class=\"string\">&#x27;利尿&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;杭州&#x27;</span>),</span><br><span class=\"line\">\t(<span class=\"number\">3</span>,<span class=\"string\">&#x27;cherry&#x27;</span>,<span class=\"string\">&#x27;养颜驻容&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;深圳&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p><strong>触发器的创建</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建 BEFORE INSERT 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> product_bf_insert</span><br><span class=\"line\"><span class=\"keyword\">BEFORE</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">on</span> product</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> operate <span class=\"keyword\">VALUES</span>(<span class=\"literal\">NULL</span>,<span class=\"string\">&#x27;数据插入成功！&#x27;</span>,<span class=\"built_in\">TIME</span>(<span class=\"keyword\">NOW</span>()));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> product(<span class=\"keyword\">id</span>,<span class=\"string\">`NAME`</span>,<span class=\"string\">`Function`</span>,Company,Address) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">\t(<span class=\"number\">4</span>,<span class=\"string\">&#x27;peach&#x27;</span>,<span class=\"string\">&#x27;补益气血，养阴生津&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;北京&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建 AFTER UPDATE 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> product_af_update</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">UPDATE</span> <span class=\"keyword\">on</span> product</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> operate <span class=\"keyword\">VALUES</span>(<span class=\"literal\">NULL</span>,<span class=\"string\">&#x27;数据更新成功！&#x27;</span>,<span class=\"built_in\">TIME</span>(<span class=\"keyword\">NOW</span>()));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 更新数据</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> product <span class=\"keyword\">SET</span> Address=<span class=\"string\">&#x27;北京海淀区&#x27;</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span>=<span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建 AFTER DELETE 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> product_af_del</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">DELETE</span> <span class=\"keyword\">on</span> product</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> operate <span class=\"keyword\">VALUES</span>(<span class=\"literal\">NULL</span>,<span class=\"string\">&#x27;数据删除成功！&#x27;</span>,<span class=\"built_in\">TIME</span>(<span class=\"keyword\">NOW</span>()));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 删除数据</span></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> product <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span>=<span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n<p><strong>删除触发器</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除 product_bf_insert 和 product_af_update 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> product_bf_insert;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> product_af_update;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "MySQL",
                "学习笔记",
                "Trigger"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/b0fdf7c6.html",
            "url": "https://miraitowa.cc/post/b0fdf7c6.html",
            "title": "leetcode-爬楼梯",
            "date_published": "2020-09-27T11:04:03.000Z",
            "content_html": "<h2 id=\"爬楼梯\">爬楼梯</h2>\n<p>假设你正在爬楼梯。需要<code>n</code>阶你才能到达楼顶。<br>\n每次你可以爬<code>1</code>或<code>2</code>个台阶。你有多少种不同的方法可以爬到楼顶呢？</p>\n<p>注意：给定<code>n</code>是一个正整数。</p>\n<p><strong>示例 1：</strong></p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入： 2</span><br><span class=\"line\">输出： 2</span><br><span class=\"line\">解释： 有两种方法可以爬到楼顶。</span><br><span class=\"line\">1.  1 阶 + 1 阶</span><br><span class=\"line\">2.  2 阶</span><br></pre></td></tr></table></figure>\n<p><strong>示例 2：</strong></p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入： 3</span><br><span class=\"line\">输出： 3</span><br><span class=\"line\">解释： 有三种方法可以爬到楼顶。</span><br><span class=\"line\">1.  1 阶 + 1 阶 + 1 阶</span><br><span class=\"line\">2.  1 阶 + 2 阶</span><br><span class=\"line\">3.  2 阶 + 1 阶</span><br></pre></td></tr></table></figure>\n<h4 id=\"解题思路\">解题思路</h4>\n<p><strong>斐波那契数列</strong></p>\n<p><code>current_step = step1 + step2</code></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">climbStairs</span><span class=\"params\">(<span class=\"keyword\">int</span> n)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 第n层，等于第n-1层+第n-2层</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (n &lt;= <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> step1 = <span class=\"number\">1</span>, step2 = <span class=\"number\">2</span>, temp;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">3</span>; i &lt;= n; i++) &#123;</span><br><span class=\"line\">        temp = step1;</span><br><span class=\"line\">        step1 = step2;</span><br><span class=\"line\">        step2 = temp + step1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> step2;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>",
            "tags": [
                "C",
                "算法",
                "leetcode"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/812420b3.html",
            "url": "https://miraitowa.cc/post/812420b3.html",
            "title": "leetcode-两数之和",
            "date_published": "2020-09-26T12:58:03.000Z",
            "content_html": "<h2 id=\"两数之和\">两数之和</h2>\n<p>给定一个整数数组<code>nums</code>和一个目标值<code>target</code>请你在该数组中找出和为目标值的那两个整数,并返回他们的数组下标。<br>\n你可以假设每种输入只会对应一个答案。但是，数组中同一个元素不能使用两遍。<br>\n<strong>示例:</strong></p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">给定 nums = [2, 7, 11, 15], target = 9</span><br><span class=\"line\">因为 nums[0] + nums[1] = 2 + 7 = 9</span><br><span class=\"line\">所以返回 [0, 1]</span><br></pre></td></tr></table></figure>\n<h4 id=\"解题思路\">解题思路</h4>\n<p><strong>无序数组的两数之和</strong></p>\n<p>代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span>* <span class=\"title\">twoSum</span><span class=\"params\">(<span class=\"keyword\">int</span>* nums, <span class=\"keyword\">int</span> numsSize, <span class=\"keyword\">int</span> target, <span class=\"keyword\">int</span>* returnSize)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> count[<span class=\"number\">2</span>] = &#123;<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i,j;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>;i &lt; numsSize - <span class=\"number\">1</span>;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(j = i + <span class=\"number\">1</span>;j &lt; numsSize;j++)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(nums[i] + nums[j] == target)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                count[<span class=\"number\">0</span>] = i;</span><br><span class=\"line\">                count[<span class=\"number\">1</span>] = j;</span><br><span class=\"line\">                * returnSize = <span class=\"number\">2</span>;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> count;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    * returnSize = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> count;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "C",
                "算法",
                "leetcode"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/f5a946ac.html",
            "url": "https://miraitowa.cc/post/f5a946ac.html",
            "title": "MySQL 视图与索引",
            "date_published": "2020-09-24T07:50:11.000Z",
            "content_html": "<h2 id=\"视图\">视图</h2>\n<h3 id=\"基本概念\">基本概念</h3>\n<p><strong>视图本身是一张虚拟表，不存放任何数据。在使用SQL语句访问视图的时候，获取的数据是MySQL从其它表中生成的，视图和表在同一个命名空间。视图查询数据相对安全，视图可以隐藏一些数据和结构，只让用户看见权限内的数据，使复杂的查询易于理解和使用。</strong></p>\n<h3 id=\"视图用法\">视图用法</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 基本语法</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">OR</span> <span class=\"keyword\">REPLACE</span> <span class=\"keyword\">VIEW</span> view_name </span><br><span class=\"line\"><span class=\"keyword\">AS</span> select_statement</span><br></pre></td></tr></table></figure>\n<p><strong>注意事项：表和视图共享数据库中相同的名称空间，因此，数据库不能包含具有相同名称的表和视图。</strong></p>\n<h4 id=\"视图调用\">视图调用</h4>\n<p><strong>和MySQL的表查询基本一致，可以使用各种查询条件。</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> user_order_view <span class=\"keyword\">WHERE</span> user_name=<span class=\"string\">&#x27;Cicada&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"查看视图\">查看视图</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SHOW</span> <span class=\"keyword\">CREATE</span> <span class=\"keyword\">VIEW</span> user_order_view ;</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改视图\">修改视图</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">VIEW</span> view_name <span class=\"keyword\">AS</span> select_statement ;</span><br></pre></td></tr></table></figure>\n<h4 id=\"删除视图\">删除视图</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">VIEW</span> [<span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span>] view_name ;</span><br></pre></td></tr></table></figure>\n<h3 id=\"视图更新\">视图更新</h3>\n<p><strong>在指定条件允许的情况下，可以通过在视图上操作更新，删除，甚至写入数据，进而更新视图所涉及的相关表。</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">UPDATE</span> user_order_view <span class=\"keyword\">SET</span> user_name=<span class=\"string\">&#x27;smile&#x27;</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span>=<span class=\"string\">&#x27;1&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>如果视图定义时使用聚合函数，分组等特殊操作，则无法更新。</p>\n</li>\n<li>\n<p>MySQL不支持在视图上创建触发器。</p>\n</li>\n</ul>\n<h3 id=\"注意事项\">注意事项</h3>\n<ul>\n<li>MySQL并不支持在视图中创建索引，使用视图的时候可能会引发很多查询性能问题</li>\n</ul>\n<h2 id=\"索引\">索引</h2>\n<h3 id=\"索引的优缺点\">索引的优缺点</h3>\n<h4 id=\"优点\">优点</h4>\n<ul>\n<li>索引大大减小了服务器需要扫描的数据量</li>\n<li>索引可以帮助服务器避免排序和临时表</li>\n<li>索引对于InnoDB（对索引支持行级锁）非常重要，因为它可以让查询锁更少的元组。</li>\n</ul>\n<h4 id=\"缺点\">缺点</h4>\n<ul>\n<li>虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存索引文件。</li>\n<li>建立索引会占用磁盘空间的索引文件。</li>\n<li>如果某个数据列包含许多重复的内容，为它建立索引就没有太大的实际效果。</li>\n<li>对于非常小的表，大部分情况下简单的全表扫描更高效；</li>\n</ul>\n<h3 id=\"索引创建语法\">索引创建语法</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 普通索引</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">index</span> index1 <span class=\"keyword\">on</span> student (<span class=\"keyword\">id</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 唯一索引</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">INDEX</span> index2 <span class=\"keyword\">on</span> student(<span class=\"keyword\">id</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 全文索引</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> FULLTEXT <span class=\"keyword\">INDEX</span> index3 <span class=\"keyword\">on</span> student(adress(<span class=\"number\">20</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建单列索引</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">INDEX</span> INDEX5 <span class=\"keyword\">on</span> student(<span class=\"keyword\">name</span>(<span class=\"number\">10</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 联合索引</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">INDEX</span> INDEX6 <span class=\"keyword\">ON</span> student (<span class=\"keyword\">name</span>,<span class=\"keyword\">id</span>); </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 普通索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> student <span class=\"keyword\">ADD</span> <span class=\"keyword\">INDEX</span> index1(<span class=\"keyword\">id</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 唯一索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> student <span class=\"keyword\">ADD</span> <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">INDEX</span> index2(<span class=\"keyword\">id</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 全文索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> student <span class=\"keyword\">add</span> FULLTEXT <span class=\"keyword\">INDEX</span> index3 (<span class=\"keyword\">NAME</span>(<span class=\"number\">20</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 单列索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> student <span class=\"keyword\">ADD</span> <span class=\"keyword\">INDEX</span> index4 (adress(<span class=\"number\">20</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 联合索引</span></span><br><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">TABLE</span> student <span class=\"keyword\">ADD</span> <span class=\"keyword\">INDEX</span> INDEX5 (<span class=\"keyword\">name</span>,<span class=\"keyword\">id</span>);</span><br></pre></td></tr></table></figure>",
            "tags": [
                "MySQL",
                "数据库",
                "View",
                "index"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/47c80ad2.html",
            "url": "https://miraitowa.cc/post/47c80ad2.html",
            "title": "MySQL 存储过程事务处理",
            "date_published": "2020-09-19T02:24:11.000Z",
            "content_html": "<h2 id=\"存储过程\">存储过程</h2>\n<h3 id=\"简介\">简介</h3>\n<p>存储程序是被存储在服务器中的组合SQL语句，经编译创建并保存在数据库中，用户可通过存储过程的名字调用执行。存储过程核心思想就是数据库SQL语言层面的封装与重用性。使用存储过程可以较少应用系统的业务复杂性，但是会增加数据库服务器系统的负荷。</p>\n<h3 id=\"基本语法\">基本语法</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">PROCEDURE</span> sp_name ([proc_parameter[,...]])</span><br><span class=\"line\">    [characteristic ...] routine_body</span><br></pre></td></tr></table></figure>\n<h3 id=\"案例\">案例</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 查询学生表中性别为男的学生总数</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">PROCEDURE</span> u_pro(<span class=\"keyword\">IN</span> v_sex <span class=\"built_in\">VARCHAR</span>(<span class=\"number\">5</span>) <span class=\"built_in\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 ,<span class=\"keyword\">OUT</span> <span class=\"keyword\">num</span> <span class=\"built_in\">INT</span>)</span><br><span class=\"line\">  <span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">  <span class=\"keyword\">SELECT</span> <span class=\"keyword\">COUNT</span>(*) <span class=\"keyword\">INTO</span> <span class=\"keyword\">num</span> <span class=\"keyword\">FROM</span> student <span class=\"keyword\">WHERE</span> v_sex=sex;</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CALL</span> u_pro(<span class=\"string\">&#x27;男&#x27;</span>,@<span class=\"keyword\">num</span>);</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> @<span class=\"keyword\">num</span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 计算1+到n的值</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">PROCEDURE</span> addresult(<span class=\"keyword\">IN</span> n <span class=\"built_in\">INT</span>)</span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> i <span class=\"built_in\">INT</span>;</span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> <span class=\"keyword\">sum</span> <span class=\"built_in\">INT</span>;</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> <span class=\"keyword\">sum</span> =<span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> i =<span class=\"number\">1</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  WHILE i&lt;n DO</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> <span class=\"keyword\">sum</span>=<span class=\"keyword\">sum</span>+i;</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> i=i+<span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">END</span> <span class=\"keyword\">WHILE</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">SELECT</span> <span class=\"keyword\">sum</span> ;</span><br><span class=\"line\"><span class=\"keyword\">END</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">call</span> addresult(<span class=\"number\">50</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 计算1+到n的值</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">PROCEDURE</span> addresult2(<span class=\"keyword\">in</span> n <span class=\"built_in\">INT</span>,<span class=\"keyword\">out</span> <span class=\"keyword\">sum</span> <span class=\"built_in\">INT</span>)</span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> i <span class=\"built_in\">INT</span>;</span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> <span class=\"keyword\">sum</span> <span class=\"built_in\">INT</span>;</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> <span class=\"keyword\">sum</span> =<span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> i =<span class=\"number\">1</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  WHILE i&lt;n DO</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> <span class=\"keyword\">sum</span>=<span class=\"keyword\">sum</span>+i;</span><br><span class=\"line\">  <span class=\"keyword\">SET</span> i=i+<span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">END</span> <span class=\"keyword\">WHILE</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">SELECT</span> <span class=\"keyword\">sum</span> ;</span><br><span class=\"line\"><span class=\"keyword\">END</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">call</span> addresult2(<span class=\"number\">50</span>,@<span class=\"keyword\">sum</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 判断变量</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">PROCEDURE</span> user_main_pro3(INOUT v_id <span class=\"built_in\">INT</span>)</span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">  <span class=\"comment\"># 定义变量</span></span><br><span class=\"line\">  <span class=\"keyword\">DECLARE</span> v_count <span class=\"built_in\">INT</span>(<span class=\"number\">11</span>);</span><br><span class=\"line\">  <span class=\"comment\"># 判断</span></span><br><span class=\"line\">  IF v_id &gt; 3 THEN</span><br><span class=\"line\">     <span class=\"keyword\">SET</span> v_count = <span class=\"number\">100</span>;</span><br><span class=\"line\">  ELSE </span><br><span class=\"line\">     <span class=\"keyword\">SET</span> v_count = <span class=\"number\">500</span>;</span><br><span class=\"line\">  <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\">  <span class=\"comment\"># 返回赋值</span></span><br><span class=\"line\">  <span class=\"keyword\">SET</span> v_id = v_count;</span><br><span class=\"line\"><span class=\"keyword\">END</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SET</span> @v_id=<span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">call</span> user_main_pro3(@v_id);</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> @v_id;</span><br></pre></td></tr></table></figure>\n<h2 id=\"事务处理\">事务处理</h2>\n<h3 id=\"注意点\">注意点</h3>\n<p><strong>MySQL中Innodb支持事务，而MyISAM不支持事务</strong></p>\n<h3 id=\"事务的特性：\">事务的特性：</h3>\n<ol>\n<li>原子性（Atomicity）：事务开始后的所有操作，要么全部做完，要么全部不做。事务执行过程中出错，会回滚到事务开始前的状态，所有的操作就像没有发生一样。</li>\n<li>一致性（Consistency）：事务开始前和结束后，数据库的完整性约束没有被破坏 。比如A向B转账，不可能A扣了钱，B却没收到。</li>\n<li>隔离性（Isolation）：同一时间，只允许一个事务请求同一数据，不同的事务之间彼此没有任何干扰。比如A正在从一张银行卡中取钱，在A取钱的过程结束前，B不能向这张卡转账。</li>\n<li>持久性（Durability）：事务完成后，事务对数据库的所有更新将被保存到数据库，不能回滚。</li>\n</ol>\n<h3 id=\"并发问题\">并发问题</h3>\n<ol>\n<li>脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据</li>\n<li>不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。</li>\n<li>幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这时就叫幻读。</li>\n</ol>\n<p><strong>注:不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表</strong></p>\n<h3 id=\"事务隔离级别\">事务隔离级别</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">事务隔离级别</th>\n<th style=\"text-align:right\">脏读</th>\n<th style=\"text-align:center\">不可重复读</th>\n<th style=\"text-align:center\">幻读</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">读未提交（read-uncommitted）</td>\n<td style=\"text-align:right\">是</td>\n<td style=\"text-align:center\">是</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">不可重复读（read-committed）</td>\n<td style=\"text-align:right\">否</td>\n<td style=\"text-align:center\">是</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">可重复读（repeatable-read）</td>\n<td style=\"text-align:right\">否</td>\n<td style=\"text-align:center\">否</td>\n<td style=\"text-align:center\">是</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">串行化（serializable）</td>\n<td style=\"text-align:right\">否</td>\n<td style=\"text-align:center\">否</td>\n<td style=\"text-align:center\">否</td>\n</tr>\n</tbody>\n</table>\n<p><strong>设置隔离级别：</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SET</span> <span class=\"keyword\">SESSION</span> <span class=\"keyword\">TRANSACTION</span> <span class=\"keyword\">ISOLATION</span> <span class=\"keyword\">LEVEL</span> <span class=\"keyword\">READ</span> UNCOMMITTED;</span><br></pre></td></tr></table></figure>\n<p>只有增删改语句才支持事务</p>\n",
            "tags": [
                "MySQL",
                "数据库",
                "存储过程",
                "视图"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/89bbd8d4.html",
            "url": "https://miraitowa.cc/post/89bbd8d4.html",
            "title": "MySQL 查询",
            "date_published": "2020-09-14T11:04:03.000Z",
            "content_html": "<h2 id=\"连接查询\">连接查询</h2>\n<p><strong>在数据库中join操作被称为连接，作用是能连接多个表的数据（通过连接条件），从多个表中获取数据合并在一起作为结果集返回给客户端。</strong></p>\n<h3 id=\"交叉连接\">交叉连接</h3>\n<p><strong>交叉连接：将两张表的数据与另外一张表彼此交叉</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">1</span> <span class=\"keyword\">cross</span> <span class=\"keyword\">join</span> 表<span class=\"number\">2</span></span><br><span class=\"line\">eg：</span><br><span class=\"line\"><span class=\"keyword\">select</span> class.cname, student.sname <span class=\"keyword\">from</span> student <span class=\"keyword\">cross</span> <span class=\"keyword\">join</span> <span class=\"keyword\">class</span> <span class=\"keyword\">on</span> class.cid =</span><br><span class=\"line\">student.classid;</span><br><span class=\"line\"><span class=\"comment\">--其中的on代表两个表的连接条件</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"内连接\">内连接</h3>\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"https://gitee.com/usocute/gallery/raw/master/img/miraitowa-mysql-inner-join.png\" alt=\"inner-join\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">方式一：</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">1</span>,表<span class=\"number\">2</span> <span class=\"keyword\">where</span> 表<span class=\"number\">1.</span>列=表<span class=\"number\">2.</span>列</span><br><span class=\"line\">方式二：</span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">inner</span> <span class=\"keyword\">join</span> 表<span class=\"number\">2</span> <span class=\"keyword\">on</span> 表<span class=\"number\">1.</span>列=表<span class=\"number\">2.</span>列</span><br></pre></td></tr></table></figure>\n<h3 id=\"外连接\">外连接</h3>\n<h4 id=\"左连接\">左连接</h4>\n<p>左连接基础语法是 <code>a left outer join b </code>，其中的 <code>outer</code> 可以省略，与内连接相比就是在与内连接相<br>\n同条件下，在内连接的结果集中添加<code>a</code>表在<code>b</code>表中找不到匹配的记录，换句话说就是，结果集中会包含<code>a</code>表中的所有记录，如果<code>b</code>表中有匹配的记录就出现在结果集，否则使用 <code>NULL</code> 代替，也就是把<code>a</code>表看成根本，不可缺失记录。<br>\n<img src= \"/img/loading.gif\" data-lazy-src=\"https://gitee.com/usocute/gallery/raw/master/img/miraitowa-mysql-left-join.png\" alt=\"left-join\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">left</span> <span class=\"keyword\">join</span> 表<span class=\"number\">2</span> <span class=\"keyword\">on</span> 表<span class=\"number\">1.</span>列=表<span class=\"number\">2.</span>列</span><br></pre></td></tr></table></figure>\n<h4 id=\"右连接\">右连接</h4>\n<p>右外连接基础语法是 <code>a right outer join b </code>，其中的 <code>outer</code> 可以省略，与内连接相比就是在与内连<br>\n接相同条件下，在内连接的结果集中添加b表在a表中找不到匹配的记录，换句话说就是，结果集中会包含b表中的所有记录，如果a表中有匹配的记录就出现在结果集，否则使用 NULL 代替，也就是把b表看成根本，不可缺失记录，作用与左外连接恰好相反。<br>\n<img src= \"/img/loading.gif\" data-lazy-src=\"https://gitee.com/usocute/gallery/raw/master/img/miraitowa-mysql-right-join.png\" alt=\"right-join\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">right</span> <span class=\"keyword\">join</span> 表<span class=\"number\">2</span> <span class=\"keyword\">on</span> 表<span class=\"number\">1.</span>列=表<span class=\"number\">2.</span>列</span><br></pre></td></tr></table></figure>\n<h3 id=\"自连接\">自连接</h3>\n<p>自连接就是表与它自身相关联，进行自连接时通过给表起不同的别名来区分一个表的两个实例。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> 表.字段<span class=\"number\">1</span>,表.字段<span class=\"number\">2</span>,表.字段<span class=\"number\">3</span> </span><br><span class=\"line\"><span class=\"keyword\">from</span> 表<span class=\"number\">1</span> <span class=\"keyword\">as</span> 别名,表<span class=\"number\">2</span> <span class=\"keyword\">as</span> 别名 </span><br><span class=\"line\"><span class=\"keyword\">where</span> 别名.字段<span class=\"number\">2</span>=别名<span class=\"number\">2.</span>字段<span class=\"number\">3</span>；</span><br></pre></td></tr></table></figure>\n<h2 id=\"子查询\">子查询</h2>\n<p>子查询指嵌套在查询内部，且必须始终出现在圆括号。子查询可以包含多个关键字或条件，如<br>\n<code>DISTINCT</code>、<code>GROUP BY</code>、<code>ORDER BY</code>、<code>LIMIT</code>、<code>函数</code>等。<br>\n子查询的外层查询可以是：<code>SELECT</code>，<code>INSERT</code>，<code>UPDATE</code>，<code>SET或DO</code>。<br>\n子查询可以返回标量，一行，一列或子查询。</p>\n<h3 id=\"将子查询作为派生表\">将子查询作为派生表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">1</span> <span class=\"keyword\">where</span> 字段<span class=\"number\">1</span> = （<span class=\"keyword\">select</span> 字段<span class=\"number\">2</span> <span class=\"keyword\">from</span> 表<span class=\"number\">2</span>）;</span><br></pre></td></tr></table></figure>\n<h3 id=\"把子查询用在where子句中\">把子查询用在where子句中</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">eg：</span><br><span class=\"line\"><span class=\"keyword\">select</span> ename,sal <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> sal&gt;(<span class=\"keyword\">select</span> <span class=\"keyword\">avg</span>(sal) <span class=\"keyword\">form</span> emp);</span><br></pre></td></tr></table></figure>\n<h3 id=\"在from语句中使用子查询\">在from语句中使用子查询</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">eg：</span><br><span class=\"line\"><span class=\"keyword\">select</span> t.deptno,t.avgsal,s.grade</span><br><span class=\"line\"><span class=\"keyword\">from</span> (<span class=\"keyword\">select</span> deptno,<span class=\"keyword\">avg</span>(sal) <span class=\"keyword\">as</span> avgsal <span class=\"keyword\">from</span> emp <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> deptno) t</span><br><span class=\"line\"><span class=\"keyword\">join</span> salgrade s</span><br><span class=\"line\"><span class=\"keyword\">on</span> t.avgsal <span class=\"keyword\">between</span> s.losal <span class=\"keyword\">and</span> s.hisal;</span><br></pre></td></tr></table></figure>\n<h2 id=\"集合操作-UNION\">集合操作(UNION)</h2>\n<p><strong>union  作用：合并查询结果集</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Eg：</span><br><span class=\"line\"><span class=\"keyword\">select</span> ename,job <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> job=<span class=\"string\">&#x27;manager&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">union</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> ename,job <span class=\"keyword\">from</span> emp <span class=\"keyword\">where</span> job=<span class=\"string\">&#x27;salesman&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<p><strong>limit</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">limit 起始下标，长度</span><br><span class=\"line\">如果起始下标没有指定，默认从0开始，0表示表中第一条记录。</span><br><span class=\"line\">Eg：</span><br><span class=\"line\"><span class=\"comment\">--按照工资降序排列取前5个</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> ename,sal <span class=\"keyword\">from</span> emp <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> sal <span class=\"keyword\">desc</span> <span class=\"keyword\">limit</span> <span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure>\n<p><strong>通用的分页SQL(只适用于mysql数据库管理系统)</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> t.* <span class=\"keyword\">from</span> t</span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span> t.x <span class=\"keyword\">desc</span>/<span class=\"keyword\">asc</span></span><br><span class=\"line\"><span class=\"keyword\">limit</span> (pageNo<span class=\"number\">-1</span>)*pageSize,pageSize;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "MySQL",
                "数据库",
                "查询"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/e82256d5.html",
            "url": "https://miraitowa.cc/post/e82256d5.html",
            "title": "MySQL 数据库基本操作",
            "date_published": "2020-09-10T10:24:02.000Z",
            "content_html": "<h2 id=\"数据库和表操作\">数据库和表操作</h2>\n<h3 id=\"创建数据库\">创建数据库</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> 数据库名称;</span><br></pre></td></tr></table></figure>\n<p><strong>注意事项：</strong></p>\n<ol>\n<li><strong>information_schema是MySQL自带的数据库，存储MySQL服务器管理的信息；</strong></li>\n<li><strong>mysql是MySQL的系统数据库；</strong></li>\n<li><strong>test是用户学习和测试练习使用的数据库；</strong></li>\n<li><strong>MySQL中的数据库名称不能超过64字符，不能由纯数字组成，不能包含：“/”、“:”、“*”、“?”、“&gt;”、“&lt;”等符号；</strong></li>\n<li><strong>如果要创建的数据库名称已经存在，也会发生错误。（可以用”if exists 数据库名称 ”来判断是否存在，以避免发生错误）。Eg:</strong></li>\n</ol>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 判断student数据库存在就删除</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">exists</span> student; </span><br><span class=\"line\"><span class=\"comment\">-- 重新创建student数据库</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> student;</span><br><span class=\"line\"><span class=\"comment\">-- 创建数据库后，如果需要使用数据库，使用：”use 数据库名；”如：use student;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"删除数据库\">删除数据库</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> 数据库名称；</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Eg： <span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> <span class=\"keyword\">user</span>; <span class=\"comment\">-- 删除了名叫“user”的数据库；</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">exists</span> <span class=\"keyword\">user</span>; <span class=\"comment\">-- 也可以用if exists做判断，避免发生错误；</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"创建表\">创建表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表名(</span><br><span class=\"line\">  字段名称<span class=\"number\">1</span> 数据类型 [ <span class=\"literal\">null</span> / <span class=\"keyword\">not</span> <span class=\"literal\">null</span> ] [ <span class=\"keyword\">DEFAULT</span> 默认值 ] [ AUTO_INCREMENT ] [ PRIMARY_KEY ] [ <span class=\"keyword\">COMMENT</span> ‘注释内容’ ] ,</span><br><span class=\"line\">......</span><br><span class=\"line\">  字段名称N 数据类型 [ <span class=\"literal\">null</span> / <span class=\"keyword\">not</span> <span class=\"literal\">null</span> ] [ <span class=\"keyword\">DEFAULT</span> 默认值 ] [ AUTO_INCREMENT ] [ PRIMARY_KEY ] [ <span class=\"keyword\">COMMENT</span> ‘注释内容’ ]</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Eg:</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> <span class=\"keyword\">if</span> <span class=\"keyword\">exists</span> teacher ; <span class=\"comment\">-- 首先判断是否存在teacher表，如果存在就删除</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher(</span><br><span class=\"line\">  <span class=\"keyword\">id</span> <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span> auto_increment primary <span class=\"keyword\">key</span> ,</span><br><span class=\"line\">  <span class=\"keyword\">name</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span></span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 创建了teacher表，里面有int、 name两个字段, 其中id是主键，非空，自增</span></span><br><span class=\"line\"><span class=\"comment\">-- 创建数据库后，如果需要使用数据库，使用：”use 数据库名；”如：use teacher;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"删除表\">删除表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> 表名;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Eg: <span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> teacher;</span><br><span class=\"line\">或者删除多个表格： <span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> teacher, student;</span><br></pre></td></tr></table></figure>\n<h3 id=\"复制表\">复制表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">完全复制的格式：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表<span class=\"number\">02</span> <span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">01</span>;</span><br><span class=\"line\">Eg: <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher02 <span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> teacher;</span><br><span class=\"line\"><span class=\"comment\">-- 复制一张和teacher表完全一样的teacher02表；</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">复制指定列的格式：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表<span class=\"number\">02</span> <span class=\"keyword\">select</span> 字段a，字段b，...... <span class=\"keyword\">from</span> 表<span class=\"number\">01</span>;</span><br><span class=\"line\">Eg: <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher02 <span class=\"keyword\">select</span> <span class=\"keyword\">id</span>, <span class=\"keyword\">name</span> <span class=\"keyword\">from</span> teacher;</span><br><span class=\"line\"><span class=\"comment\">-- 复制一张teacher02表，里面包含teacher表里的id，name；</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">完全复制表结构（包括键key），但是不复制里面的内容，格式是：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表<span class=\"number\">02</span> <span class=\"keyword\">like</span> 表<span class=\"number\">01</span>;</span><br><span class=\"line\">Eg: <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher02 <span class=\"keyword\">like</span> teacher;</span><br><span class=\"line\"><span class=\"comment\">-- 复制一张teacher02表，其结构和teacher表相同，但没有teacher里的内容；</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"修改表\">修改表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 增加字段：add</span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">add</span> age <span class=\"built_in\">int</span> <span class=\"literal\">null</span>; <span class=\"comment\">-- 添加age列，int类型，可以为null；  </span></span><br><span class=\"line\"></span><br><span class=\"line\">2. 删除字段：<span class=\"keyword\">drop</span></span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">drop</span> age; <span class=\"comment\">-- 删除age列；  </span></span><br><span class=\"line\"></span><br><span class=\"line\">3.修改字段：<span class=\"keyword\">change</span></span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">change</span> <span class=\"keyword\">name</span> teacher_name <span class=\"built_in\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 修改name列为teacher_name，varchar类型最大30个字符，不能为null；</span></span><br><span class=\"line\"></span><br><span class=\"line\">4. 增加主键：add primary key()</span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">add</span> primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>); <span class=\"comment\">-- 设置id为主键（id是已有字段）；</span></span><br><span class=\"line\"></span><br><span class=\"line\">5. 修改表名：<span class=\"keyword\">rename</span> <span class=\"keyword\">to</span></span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">rename</span> <span class=\"keyword\">to</span> <span class=\"keyword\">user</span>; <span class=\"comment\">-- 把teacher表改名为user；</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"数据完整性\">数据完整性</h2>\n<p><code>数据完整性的概念：确保数据正确性和一致性的机制。</code></p>\n<ol>\n<li>域完整性：即列的完整性。如：年龄不能超过150岁，id不能为null。</li>\n<li>实体完整性：即行的完整性。如：实体“张三”具有区别于实体“李四”的特征。</li>\n<li>参照完整性：主关系表（被参照表）和从关系表（参照表）中数据的一致性。</li>\n<li>用户定义完整性：用户根据具体需求来定义约束条件。</li>\n</ol>\n<h2 id=\"使用SQL语句为表创建和删除约束\">使用SQL语句为表创建和删除约束</h2>\n<p>如果要修改已创建的约束，最简单实用的方式就是先删除已有的约束，再建立同名的约束。</p>\n<h3 id=\"添加约束：\">添加约束：</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">格式：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">add</span> [<span class=\"keyword\">constraint</span>] [约束名称] 约束类型（约束内容[可多个字段]）;</span><br></pre></td></tr></table></figure>\n<h4 id=\"主键约束\">主键约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">主键约束: </span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> PK_user_id primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 把user表的id添加主键约束，约束名称是PK_user_id。（PK是主键的简写）</span></span><br><span class=\"line\"></span><br><span class=\"line\">设置联合主键的方式：</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">add</span> primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>，<span class=\"keyword\">name</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 设置了联合主键id和name； 补充： 在创建表的时候也可以直接设置主键约束。</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"唯一约束\">唯一约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">唯一约束：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">add</span> [<span class=\"keyword\">constraint</span>] <span class=\"keyword\">unique</span>(<span class=\"keyword\">id</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"默认约束\">默认约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">默认约束：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">alter</span> <span class=\"keyword\">column</span>列名 <span class=\"keyword\">set</span> <span class=\"keyword\">DEFAULT</span> 默认值;</span><br><span class=\"line\"><span class=\"comment\">-- 默认值可以为常量或者为空（null）；</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"检查约束\">检查约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">检查约束：（与SQL Server中的检查约束有语法区别）可以使用**枚举**。</span><br><span class=\"line\">Eg：<span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student ( ...... sex **enum**(‘男’, ‘女’) <span class=\"keyword\">not</span></span><br><span class=\"line\"><span class=\"literal\">null</span> <span class=\"comment\">-- 学员性别 );</span></span><br><span class=\"line\"><span class=\"comment\">-- 默认值可以为常量或者为空（null）；</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"外键约束\">外键约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">外键约束： 格式：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> 约束名称 约束类型;</span><br><span class=\"line\">(外键约束简称为“FK”)</span><br><span class=\"line\">Eg：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> FK_student_class_classid <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span> (classid) <span class=\"keyword\">references</span> <span class=\"keyword\">class</span>(classid);</span><br><span class=\"line\"><span class=\"comment\">-- 为student表所在的班级字段classid设置了外键约束。</span></span><br><span class=\"line\"></span><br><span class=\"line\">创建时设置外键：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student ( </span><br><span class=\"line\">...... </span><br><span class=\"line\">classid <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span>, <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span>(classid) <span class=\"keyword\">references</span> <span class=\"keyword\">class</span>(classid) </span><br><span class=\"line\"><span class=\"comment\">-- 设置名称为classid的外键，指向class表的classid； </span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h4 id=\"设置级联操作\">设置级联操作</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设置级联操作：</span><br><span class=\"line\">restrict和no action表示在子表有关联记录的情况下父表不能更新；</span><br><span class=\"line\">cascade 表示父表在更新或者删除时，同时更新或删除子表对应的记录；</span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"literal\">null</span> 表示父表在更新或者删除时，子表对应的字段设置为<span class=\"literal\">null</span>；</span><br><span class=\"line\"></span><br><span class=\"line\">Eg：</span><br><span class=\"line\">(<span class=\"number\">1</span>).alter <span class=\"keyword\">table</span> student <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> FK_student_class_classid <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span> (classid) <span class=\"keyword\">references</span> <span class=\"keyword\">class</span>(classid) <span class=\"keyword\">on</span> <span class=\"keyword\">delete</span> <span class=\"keyword\">set</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 如：删除class表中classid=1对应的字段时，student表中的classid字段的值设置为null</span></span><br><span class=\"line\"></span><br><span class=\"line\">(2).alter table student add constraint FK_student_class_classid foreign key (classid) references class(classid) on <span class=\"keyword\">delete</span> <span class=\"keyword\">set</span> <span class=\"keyword\">cascade</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 如：删除class表中classid=1对应的字段时，同时删除student表中所有classid=1的该行数据。</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"删除约束\">删除约束</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">drop</span> [<span class=\"keyword\">constraint</span>] 约束名称;</span><br><span class=\"line\"><span class=\"comment\">-- constraint关键字可省略 -- 如果将表删除了，那么相关的约束也就删除了。</span></span><br><span class=\"line\"></span><br><span class=\"line\">Eg01: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student <span class=\"keyword\">drop</span> primary <span class=\"keyword\">key</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 存在一个主键约束，可用此操作；</span></span><br><span class=\"line\"></span><br><span class=\"line\">Eg02: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student <span class=\"keyword\">drop</span> <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span> FK_class_student_id；</span><br><span class=\"line\"><span class=\"comment\">-- 删除外键</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"数据操作\">数据操作</h2>\n<h3 id=\"插入数据：\">插入数据：</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">--（最常用）</span></span><br><span class=\"line\"><span class=\"comment\">-- 插入值的顺序必须与表中字段的顺序完全一致。</span></span><br><span class=\"line\">1. &quot;insert...values&quot;</span><br><span class=\"line\">语法：<span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> 表名 <span class=\"keyword\">values</span>(值);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--插入一行数据</span></span><br><span class=\"line\">Eg01: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">values</span> (<span class=\"number\">1</span>, ‘zhangsan’ );</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--插入多行数据，用逗号隔开；</span></span><br><span class=\"line\">Eg02: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">values</span> (<span class=\"number\">2</span>,‘jack’)，(<span class=\"number\">3</span>, ‘rose’);</span><br><span class=\"line\"></span><br><span class=\"line\">补充：当插入的记录会引发主键或唯一约束冲突时，可以用 **on duplicate key update** 条件。</span><br><span class=\"line\">Eg: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">values</span> (<span class=\"number\">1</span>, ‘mike’ ) **<span class=\"keyword\">on</span> <span class=\"keyword\">duplicate</span> <span class=\"keyword\">key</span> <span class=\"keyword\">update</span> <span class=\"keyword\">id</span> =<span class=\"number\">10</span>**;</span><br><span class=\"line\"><span class=\"comment\">-- 由于id是主键，id=1与上面zhangsan行冲突，所以自动把zhangsan的id设置为10，然后再把id=1的mike数据插入进去；</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 按照每一列对应的值插入数据</span></span><br><span class=\"line\">2. ”insert...set”</span><br><span class=\"line\">语法：<span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> 表名 <span class=\"keyword\">set</span> 列名<span class=\"number\">1</span>=值<span class=\"number\">1</span>, 列名<span class=\"number\">2</span>=值<span class=\"number\">2</span>,......;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--插入的数据是：id为5，姓名’abc’ 3）”insert...select”</span></span><br><span class=\"line\"><span class=\"comment\">-- 把从其他表查询到的数据插入到该表中，类似于like属性 Eg01: insert into user</span></span><br><span class=\"line\">Eg01: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">set</span> <span class=\"keyword\">id</span> =<span class=\"number\">5</span>, <span class=\"keyword\">name</span>=’abc’;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--把从student中查询到的数据插入到user中；</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n<h3 id=\"更新数据\">更新数据</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">格式：<span class=\"keyword\">update</span> 表名 <span class=\"keyword\">set</span> 列名<span class=\"number\">1</span>=值<span class=\"number\">1</span> [,列名<span class=\"number\">2</span>=值<span class=\"number\">2</span>,......] [where...] [<span class=\"keyword\">order</span> by...] [<span class=\"keyword\">limit</span> 行数]</span><br><span class=\"line\"><span class=\"comment\">--把id=3的列的name改为wangwu；</span></span><br><span class=\"line\">eg： <span class=\"keyword\">update</span> student <span class=\"keyword\">set</span> <span class=\"keyword\">name</span> = <span class=\"string\">&#x27;wangwu&#x27;</span> <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">003</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除数据\">删除数据</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">格式：<span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> 表名 <span class=\"keyword\">where</span> 列名=值；</span><br><span class=\"line\"><span class=\"comment\">--删除id＝３的列的数据。</span></span><br><span class=\"line\">eg：<span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> student <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">3</span>；</span><br></pre></td></tr></table></figure>",
            "tags": [
                "MySQL",
                "增删改查"
            ]
        },
        {
            "id": "https://miraitowa.cc/post/afb0e9ab.html",
            "url": "https://miraitowa.cc/post/afb0e9ab.html",
            "title": "MySQL 存储引擎和数据类型",
            "date_published": "2020-09-03T04:07:24.000Z",
            "content_html": "<h2 id=\"一、MySQL的存储引擎\">一、MySQL的存储引擎</h2>\n<p><strong>在MySQL这种关系型数据库来说，数据是以表的方式来存储的，因此，简单点来说，存储引擎就是存储和操作此表的类型。</strong></p>\n<h3 id=\"存储引擎的种类\">存储引擎的种类</h3>\n<ol>\n<li><code>InnoDB</code>存储引擎 <code>事务型</code>数据库引擎，提供了<code>事务</code>、<code>回滚</code>、<code>崩溃修复</code>能力、<code>多版本并发控制的事务安全</code>。在<code>MySQL 5.5版本开始</code>成为默认存储引擎。</li>\n<li><code>MyISAM</code>存储引擎 MyISAM存储引擎是MySQL中常见的存储引擎，是<code>MySQL 5.0之前</code>版本的<code>默认</code>存储引擎。<code>不支持事务</code>。</li>\n<li><code>MEMORY</code>存储引擎 MEMORY存储引擎是MySQL中的一个特殊的存储引擎。所有数据放在<code>内存</code>中，拥有极高的<code>插入</code>、<code>更新</code>、<code>查询效率</code>。会占用与数据量成正比的内存空间。MySQL<code>重启后数据会丢失</code>。</li>\n</ol>\n<h2 id=\"二、MySQL-数据类型\">二、MySQL 数据类型</h2>\n<table>\n<thead>\n<tr>\n<th>分类</th>\n<th>数据类型</th>\n<th>范例格式</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>整型</td>\n<td>int</td>\n<td>100</td>\n</tr>\n<tr>\n<td>浮点型</td>\n<td>double</td>\n<td>9.9</td>\n</tr>\n<tr>\n<td>字符串型</td>\n<td>varchar (20)</td>\n<td>‘云南省昆明市’</td>\n</tr>\n<tr>\n<td>日期类型</td>\n<td>date</td>\n<td>‘2019-09-09’</td>\n</tr>\n<tr>\n<td>datetime (timestamp)</td>\n<td></td>\n<td>‘2019-09-09 10:20:30’</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"三、MySQL-数据类型属性\">三、MySQL 数据类型属性</h2>\n<table>\n<thead>\n<tr>\n<th>属性名称</th>\n<th>作用</th>\n<th>使用的数据类型范</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>PRIMARY KEY</td>\n<td>主键，确保该行的唯一性。（常与 AUTO_INCREMENT合用）</td>\n<td>所有数据类型</td>\n</tr>\n<tr>\n<td>AUTO_INCREMENT</td>\n<td>为新插入的行赋上唯一的整数标识符。</td>\n<td>整数（如ID）</td>\n</tr>\n<tr>\n<td>UNIQUE</td>\n<td>确保该列所有值都不同。(NULL值可以重复)</td>\n<td>所有数据类型</td>\n</tr>\n<tr>\n<td>NOT NULL</td>\n<td>不允许该列为NULL。 —&gt;null 表示该列不存在值</td>\n<td>所有数据类型</td>\n</tr>\n<tr>\n<td>NULL</td>\n<td>允许该列为NULL。</td>\n<td>所有数据类型</td>\n</tr>\n<tr>\n<td>ZEROFILL</td>\n<td>用0填充剩余字段空间，如INT类型的表示为： 0000000008</td>\n<td>所有数据类型</td>\n</tr>\n<tr>\n<td>BINARY</td>\n<td>对字符串以区分大小写的方式排序。（按照ASCII 表）</td>\n<td>CHAR, VARCHAR</td>\n</tr>\n<tr>\n<td>DEFAULT</td>\n<td>在没有任何值的情况下，赋予某个常量。</td>\n<td>BLOB和TEXT列*不 可用</td>\n</tr>\n<tr>\n<td>INDEX</td>\n<td>为该列创建一个索引。（有序的键值组）</td>\n<td>所有数据类型</td>\n</tr>\n<tr>\n<td>NATIONAL</td>\n<td>确保该列使用默认字符集。</td>\n<td>CHAR, VARCHAR</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "MySQL",
                "存储引擎",
                "数据类型"
            ]
        }
    ]
}