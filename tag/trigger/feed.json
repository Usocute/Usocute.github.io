{
    "version": "https://jsonfeed.org/version/1",
    "title": "寻梦启事 • All posts by \"trigger\" tag",
    "description": "",
    "home_page_url": "http://eliauk.cc",
    "items": [
        {
            "id": "http://eliauk.cc/mysql-Trigger/",
            "url": "http://eliauk.cc/mysql-Trigger/",
            "title": "MySQL 触发器",
            "date_published": "2020-09-30T07:01:04.000Z",
            "content_html": "<h2 id=\"MySQL-触发器\"><a href=\"#MySQL-触发器\" class=\"headerlink\" title=\"MySQL 触发器\"></a>MySQL 触发器</h2><h4 id=\"触发器定义与用法实例\"><a href=\"#触发器定义与用法实例\" class=\"headerlink\" title=\"触发器定义与用法实例\"></a>触发器定义与用法实例</h4><p><strong>语法</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> 触发器名称  <span class=\"hljs-comment\">--触发器必须有名字，最多64个字符，可能后面会附有分隔符.它和MySQL中其他对象的命名方式基本相象.</span><br>&#123; <span class=\"hljs-keyword\">BEFORE</span> | <span class=\"hljs-keyword\">AFTER</span> &#125;  <span class=\"hljs-comment\">--触发器有执行的时间设置：可以设置为事件发生前或后。</span><br>&#123; <span class=\"hljs-keyword\">INSERT</span> | <span class=\"hljs-keyword\">UPDATE</span> | <span class=\"hljs-keyword\">DELETE</span> &#125;  <span class=\"hljs-comment\">--同样也能设定触发的事件：它们可以在执行insert、update或delete的过程中触发。</span><br><span class=\"hljs-keyword\">ON</span> 表名称  <span class=\"hljs-comment\">--触发器是属于某一个表的:当在这个表上执行插入、 更新或删除操作的时候就导致触发器的激活. 我们不能给同一张表的同一个事件安排两个触发器。</span><br><span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-keyword\">ROW</span>  <span class=\"hljs-comment\">--触发器的执行间隔：FOR EACH ROW子句通知触发器 每隔一行执行一次动作，而不是对整个表执行一次。</span><br>&lt;触发器<span class=\"hljs-keyword\">SQL</span>语句&gt;  <span class=\"hljs-comment\">--触发器包含所要触发的SQL语句：这里的语句可以是任何合法的语句， 包括复合语句，但是这里的语句受的限制和函数的一样。</span><br></code></pre></td></tr></table></figure>\n<p><strong>实例准备工作</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 创建表tab1</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">EXISTS</span> tab1;<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> tab1(<br>  tab1_id <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">11</span>)<br>);<br><span class=\"hljs-comment\">-- 创建表tab2</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">EXISTS</span> tab2;<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> tab2(<br>  tab2_id <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">11</span>)<br>);<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li><p>实例1：新增一条，触发另外一张表的新增</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 创建触发器:t_afterinsert_on_tab1</span><br><span class=\"hljs-comment\">-- 作用：增加tab1表记录后自动将记录增加到tab2表中</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TRIGGER</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">EXISTS</span> t_afterinsert_on_tab1;<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> t_afterinsert_on_tab1<br><span class=\"hljs-keyword\">AFTER</span> <span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">ON</span> tab1<br><span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-keyword\">ROW</span><br><span class=\"hljs-keyword\">BEGIN</span><br>   <span class=\"hljs-keyword\">insert</span> <span class=\"hljs-keyword\">into</span> tab2(tab2_id) <span class=\"hljs-keyword\">values</span>(new.tab1_id);<br><span class=\"hljs-keyword\">END</span>;<br><span class=\"hljs-comment\">-- 测试一下</span><br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> tab1(tab1_id) <span class=\"hljs-keyword\">values</span>(<span class=\"hljs-string\">&#x27;0001&#x27;</span>);<br><span class=\"hljs-comment\">-- 看看结果</span><br><span class=\"hljs-keyword\">SELECT</span> * <span class=\"hljs-keyword\">FROM</span> tab1;<br><span class=\"hljs-keyword\">SELECT</span> * <span class=\"hljs-keyword\">FROM</span> tab2<br></code></pre></td></tr></table></figure></li>\n<li><p>实例2：删除一条，触发另外一张表的删除</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 创建触发器:t_afterdelete_on_tab1</span><br><span class=\"hljs-comment\">-- 作用：删除tab1表记录后自动将tab2表中对应的记录删去</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TRIGGER</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">EXISTS</span> t_afterdelete_on_tab1;<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> t_afterdelete_on_tab1<br><span class=\"hljs-keyword\">AFTER</span> <span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">ON</span> tab1<br><span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-keyword\">ROW</span><br><span class=\"hljs-keyword\">BEGIN</span><br>   <span class=\"hljs-keyword\">delete</span> <span class=\"hljs-keyword\">from</span> tab2 <span class=\"hljs-keyword\">where</span> tab2_id=old.tab1_id;<br><span class=\"hljs-keyword\">END</span>;<br><span class=\"hljs-comment\">-- 测试一下</span><br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> tab1 <span class=\"hljs-keyword\">WHERE</span> tab1_id=<span class=\"hljs-string\">&#x27;0001&#x27;</span>;<br><span class=\"hljs-comment\">-- 看看结果</span><br><span class=\"hljs-keyword\">SELECT</span> * <span class=\"hljs-keyword\">FROM</span> tab1;<br><span class=\"hljs-keyword\">SELECT</span> * <span class=\"hljs-keyword\">FROM</span> tab2;<br></code></pre></td></tr></table></figure>\n</li>\n<li><p>实例3：更新一条，触发另外一张表的更新</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 创建触发器:t_afterupdate_on_tab1</span><br><span class=\"hljs-comment\">-- 作用：修改tab1表记录后自动将tab2表中对应的记录更新</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TRIGGER</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">EXISTS</span> t_afterupdate_on_tab1;<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> t_afterupdate_on_tab1<br><span class=\"hljs-keyword\">AFTER</span> <span class=\"hljs-keyword\">UPDATE</span> <span class=\"hljs-keyword\">ON</span> tab1<br><span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-keyword\">ROW</span><br><span class=\"hljs-keyword\">BEGIN</span><br>   <span class=\"hljs-keyword\">update</span> tab2 <span class=\"hljs-keyword\">set</span> tab2_id=new.tab1_id <span class=\"hljs-keyword\">where</span> tab2_id=old.tab1_id;<br><span class=\"hljs-keyword\">END</span>;<br><span class=\"hljs-comment\">-- 测试一下</span><br><span class=\"hljs-keyword\">update</span> tab1 <span class=\"hljs-keyword\">set</span> tab1_id=<span class=\"hljs-string\">&#x27;0002&#x27;</span> <span class=\"hljs-keyword\">WHERE</span> tab1_id=<span class=\"hljs-string\">&#x27;0001&#x27;</span>;<br><span class=\"hljs-comment\">-- 看看结果</span><br><span class=\"hljs-keyword\">SELECT</span> * <span class=\"hljs-keyword\">FROM</span> tab1;<br><span class=\"hljs-keyword\">SELECT</span> * <span class=\"hljs-keyword\">FROM</span> tab2;<br></code></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"课后习题\"><a href=\"#课后习题\" class=\"headerlink\" title=\"课后习题\"></a>课后习题</h4><blockquote>\n<p>1、在 product 表上分别创建 BEFORE INSERT 、 AFTER UPDATE 和 AFTER DELETE 3 个触<br>发器，触发器名称分别为 product_bf_insert 、 product_af_update 和 product_af_del 。执行语句部分都是向 operate 表插入操作方法和操作时间。<br>2、对 product 表分别执行 INSERT 、 UPDATE 和 DELETE 操作<br>3、删除 product_bf_insert 和 product_af_update 这两个触发器</p>\n</blockquote>\n<h4 id=\"题解代码\"><a href=\"#题解代码\" class=\"headerlink\" title=\"题解代码\"></a>题解代码</h4><p><strong>建立 operate和product表 并向product表中插入数据</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 建表 operate</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">EXISTS</span> <span class=\"hljs-string\">`operate`</span>;<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> <span class=\"hljs-string\">`operate`</span> (<br>  <span class=\"hljs-string\">`Op_id`</span> <span class=\"hljs-built_in\">int</span>(<span class=\"hljs-number\">10</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> AUTO_INCREMENT <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;编号&#x27;</span>,<br>  <span class=\"hljs-string\">`Op_type`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">20</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;操作方式&#x27;</span>,<br>  <span class=\"hljs-string\">`Op_time`</span> <span class=\"hljs-built_in\">time</span> <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;操作时间&#x27;</span>,<br>  PRIMARY <span class=\"hljs-keyword\">KEY</span> (<span class=\"hljs-string\">`Op_id`</span>),<br>  <span class=\"hljs-keyword\">UNIQUE</span> <span class=\"hljs-keyword\">KEY</span> <span class=\"hljs-string\">`Op_id`</span> (<span class=\"hljs-string\">`Op_id`</span>)<br>) <span class=\"hljs-keyword\">ENGINE</span>=<span class=\"hljs-keyword\">InnoDB</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">CHARSET</span>=utf8;<br><br><span class=\"hljs-comment\">-- 建表 product</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TABLE</span> <span class=\"hljs-keyword\">IF</span> <span class=\"hljs-keyword\">EXISTS</span> <span class=\"hljs-string\">`product`</span>;<br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TABLE</span> <span class=\"hljs-string\">`product`</span> (<br>  <span class=\"hljs-string\">`id`</span> <span class=\"hljs-built_in\">int</span>(<span class=\"hljs-number\">10</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;产品编号&#x27;</span>,<br>  <span class=\"hljs-string\">`Name`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">20</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;产品名称&#x27;</span>,<br>  <span class=\"hljs-string\">`Function`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">50</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;产品功能&#x27;</span>,<br>  <span class=\"hljs-string\">`Company`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">20</span>) <span class=\"hljs-keyword\">NOT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;生产厂家&#x27;</span>,<br>  <span class=\"hljs-string\">`Address`</span> <span class=\"hljs-built_in\">varchar</span>(<span class=\"hljs-number\">20</span>) <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-literal\">NULL</span> <span class=\"hljs-keyword\">COMMENT</span> <span class=\"hljs-string\">&#x27;家庭住址&#x27;</span>,<br>  PRIMARY <span class=\"hljs-keyword\">KEY</span> (<span class=\"hljs-string\">`id`</span>),<br>  <span class=\"hljs-keyword\">UNIQUE</span> <span class=\"hljs-keyword\">KEY</span> <span class=\"hljs-string\">`id`</span> (<span class=\"hljs-string\">`id`</span>)<br>) <span class=\"hljs-keyword\">ENGINE</span>=<span class=\"hljs-keyword\">InnoDB</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">CHARSET</span>=utf8;<br><br><span class=\"hljs-comment\">-- 插入数据</span><br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> product(<span class=\"hljs-keyword\">id</span>,<span class=\"hljs-string\">`NAME`</span>,<span class=\"hljs-string\">`Function`</span>,Company,Address) <span class=\"hljs-keyword\">VALUES</span><br>\t\t\t\t(<span class=\"hljs-number\">1</span>,<span class=\"hljs-string\">&#x27;百度网盘&#x27;</span>,<span class=\"hljs-string\">&#x27;数据存储&#x27;</span>,<span class=\"hljs-string\">&#x27;中国&#x27;</span>,<span class=\"hljs-string\">&#x27;北京&#x27;</span>),<br>\t\t\t\t(<span class=\"hljs-number\">2</span>,<span class=\"hljs-string\">&#x27;钉钉&#x27;</span>,<span class=\"hljs-string\">&#x27;协同办公&#x27;</span>,<span class=\"hljs-string\">&#x27;中国&#x27;</span>,<span class=\"hljs-string\">&#x27;杭州&#x27;</span>),<br>\t\t\t\t(<span class=\"hljs-number\">3</span>,<span class=\"hljs-string\">&#x27;微信&#x27;</span>,<span class=\"hljs-string\">&#x27;聊天通讯&#x27;</span>,<span class=\"hljs-string\">&#x27;中国&#x27;</span>,<span class=\"hljs-string\">&#x27;深圳&#x27;</span>);<br></code></pre></td></tr></table></figure>\n\n<p><strong>触发器的创建</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 创建 BEFORE INSERT 触发器</span><br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> product_bf_insert<br><span class=\"hljs-keyword\">BEFORE</span> <span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">on</span> product<br><span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-keyword\">ROW</span><br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> operate <span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-literal\">NULL</span>,<span class=\"hljs-string\">&#x27;数据插入成功！&#x27;</span>,<span class=\"hljs-built_in\">TIME</span>(<span class=\"hljs-keyword\">NOW</span>()));<br><br><span class=\"hljs-comment\">-- 插入数据</span><br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> product(<span class=\"hljs-keyword\">id</span>,<span class=\"hljs-string\">`NAME`</span>,<span class=\"hljs-string\">`Function`</span>,Company,Address) <span class=\"hljs-keyword\">VALUES</span><br>\t\t\t(<span class=\"hljs-number\">4</span>,<span class=\"hljs-string\">&#x27;抖音&#x27;</span>,<span class=\"hljs-string\">&#x27;影音视听&#x27;</span>,<span class=\"hljs-string\">&#x27;中国&#x27;</span>,<span class=\"hljs-string\">&#x27;北京&#x27;</span>);<br><br><span class=\"hljs-comment\">-- 创建 AFTER UPDATE 触发器</span><br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> product_af_update<br><span class=\"hljs-keyword\">AFTER</span> <span class=\"hljs-keyword\">UPDATE</span> <span class=\"hljs-keyword\">on</span> product<br><span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-keyword\">ROW</span><br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> operate <span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-literal\">NULL</span>,<span class=\"hljs-string\">&#x27;数据更新成功！&#x27;</span>,<span class=\"hljs-built_in\">TIME</span>(<span class=\"hljs-keyword\">NOW</span>()));<br><br><span class=\"hljs-comment\">-- 更新数据</span><br><span class=\"hljs-keyword\">UPDATE</span> product <span class=\"hljs-keyword\">SET</span> Address=<span class=\"hljs-string\">&#x27;北京海淀区&#x27;</span> <span class=\"hljs-keyword\">WHERE</span> <span class=\"hljs-keyword\">id</span>=<span class=\"hljs-number\">1</span>;<br><br><span class=\"hljs-comment\">-- 创建 AFTER DELETE 触发器</span><br><span class=\"hljs-keyword\">CREATE</span> <span class=\"hljs-keyword\">TRIGGER</span> product_af_del<br><span class=\"hljs-keyword\">AFTER</span> <span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">on</span> product<br><span class=\"hljs-keyword\">FOR</span> <span class=\"hljs-keyword\">EACH</span> <span class=\"hljs-keyword\">ROW</span><br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> operate <span class=\"hljs-keyword\">VALUES</span>(<span class=\"hljs-literal\">NULL</span>,<span class=\"hljs-string\">&#x27;数据删除成功！&#x27;</span>,<span class=\"hljs-built_in\">TIME</span>(<span class=\"hljs-keyword\">NOW</span>()));<br><br><span class=\"hljs-comment\">-- 删除数据</span><br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> product <span class=\"hljs-keyword\">WHERE</span> <span class=\"hljs-keyword\">id</span>=<span class=\"hljs-number\">4</span>;<br></code></pre></td></tr></table></figure>\n\n<p><strong>删除触发器</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 删除 product_bf_insert 和 product_af_update 触发器</span><br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TRIGGER</span> product_bf_insert;<br><span class=\"hljs-keyword\">DROP</span> <span class=\"hljs-keyword\">TRIGGER</span> product_af_update;<br></code></pre></td></tr></table></figure>",
            "tags": [
                "MySQL",
                "学习笔记",
                "Trigger"
            ]
        }
    ]
}