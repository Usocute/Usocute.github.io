{
    "version": "https://jsonfeed.org/version/1",
    "title": "草萤非火 • All posts by \"增删改查\" tag",
    "description": "一个收藏回忆记录成长的地方...",
    "home_page_url": "https://miraitowa.cc",
    "items": [
        {
            "id": "https://miraitowa.cc/post/e82256d5.html",
            "url": "https://miraitowa.cc/post/e82256d5.html",
            "title": "MySQL 数据库基本操作",
            "date_published": "2020-09-10T10:24:02.000Z",
            "content_html": "<h2 id=\"数据库和表操作\"><a class=\"markdownIt-Anchor\" href=\"#数据库和表操作\">#</a> 数据库和表操作</h2>\n<h3 id=\"创建数据库\"><a class=\"markdownIt-Anchor\" href=\"#创建数据库\">#</a> 创建数据库</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> 数据库名称;</span><br></pre></td></tr></table></figure>\n<p><strong>注意事项：</strong></p>\n<ol>\n<li><strong>information_schema 是 MySQL 自带的数据库，存储 MySQL 服务器管理的信息；</strong></li>\n<li><strong>mysql 是 MySQL 的系统数据库；</strong></li>\n<li><strong>test 是用户学习和测试练习使用的数据库；</strong></li>\n<li><strong>MySQL 中的数据库名称不能超过 64 字符，不能由纯数字组成，不能包含：“/”、“:”、“*”、“?”、“&gt;”、“&lt;” 等符号；</strong></li>\n<li><strong>如果要创建的数据库名称已经存在，也会发生错误。（可以用”if exists 数据库名称 ” 来判断是否存在，以避免发生错误）。Eg:</strong></li>\n</ol>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 判断student数据库存在就删除</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">exists</span> student; </span><br><span class=\"line\"><span class=\"comment\">-- 重新创建student数据库</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> student;</span><br><span class=\"line\"><span class=\"comment\">-- 创建数据库后，如果需要使用数据库，使用：”use 数据库名；”如：use student;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"删除数据库\"><a class=\"markdownIt-Anchor\" href=\"#删除数据库\">#</a> 删除数据库</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> 数据库名称；</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Eg： <span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> <span class=\"keyword\">user</span>; <span class=\"comment\">-- 删除了名叫“user”的数据库；</span></span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> <span class=\"keyword\">if</span> <span class=\"keyword\">exists</span> <span class=\"keyword\">user</span>; <span class=\"comment\">-- 也可以用if exists做判断，避免发生错误；</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"创建表\"><a class=\"markdownIt-Anchor\" href=\"#创建表\">#</a> 创建表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表名(</span><br><span class=\"line\">  字段名称<span class=\"number\">1</span> 数据类型 [ <span class=\"literal\">null</span> / <span class=\"keyword\">not</span> <span class=\"literal\">null</span> ] [ <span class=\"keyword\">DEFAULT</span> 默认值 ] [ AUTO_INCREMENT ] [ PRIMARY_KEY ] [ <span class=\"keyword\">COMMENT</span> ‘注释内容’ ] ,</span><br><span class=\"line\">......</span><br><span class=\"line\">  字段名称N 数据类型 [ <span class=\"literal\">null</span> / <span class=\"keyword\">not</span> <span class=\"literal\">null</span> ] [ <span class=\"keyword\">DEFAULT</span> 默认值 ] [ AUTO_INCREMENT ] [ PRIMARY_KEY ] [ <span class=\"keyword\">COMMENT</span> ‘注释内容’ ]</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Eg:</span><br><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> <span class=\"keyword\">if</span> <span class=\"keyword\">exists</span> teacher ; <span class=\"comment\">-- 首先判断是否存在teacher表，如果存在就删除</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher(</span><br><span class=\"line\">  <span class=\"keyword\">id</span> <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span> auto_increment primary <span class=\"keyword\">key</span> ,</span><br><span class=\"line\">  <span class=\"keyword\">name</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span></span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 创建了teacher表，里面有int、 name两个字段, 其中id是主键，非空，自增</span></span><br><span class=\"line\"><span class=\"comment\">-- 创建数据库后，如果需要使用数据库，使用：”use 数据库名；”如：use teacher;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"删除表\"><a class=\"markdownIt-Anchor\" href=\"#删除表\">#</a> 删除表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> 表名;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Eg: <span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> teacher;</span><br><span class=\"line\">或者删除多个表格： <span class=\"keyword\">drop</span> <span class=\"keyword\">table</span> teacher, student;</span><br></pre></td></tr></table></figure>\n<h3 id=\"复制表\"><a class=\"markdownIt-Anchor\" href=\"#复制表\">#</a> 复制表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">完全复制的格式：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表<span class=\"number\">02</span> <span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> 表<span class=\"number\">01</span>;</span><br><span class=\"line\">Eg: <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher02 <span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> teacher;</span><br><span class=\"line\"><span class=\"comment\">-- 复制一张和teacher表完全一样的teacher02表；</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">复制指定列的格式：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表<span class=\"number\">02</span> <span class=\"keyword\">select</span> 字段a，字段b，...... <span class=\"keyword\">from</span> 表<span class=\"number\">01</span>;</span><br><span class=\"line\">Eg: <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher02 <span class=\"keyword\">select</span> <span class=\"keyword\">id</span>, <span class=\"keyword\">name</span> <span class=\"keyword\">from</span> teacher;</span><br><span class=\"line\"><span class=\"comment\">-- 复制一张teacher02表，里面包含teacher表里的id，name；</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">完全复制表结构（包括键key），但是不复制里面的内容，格式是：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> 表<span class=\"number\">02</span> <span class=\"keyword\">like</span> 表<span class=\"number\">01</span>;</span><br><span class=\"line\">Eg: <span class=\"keyword\">create</span> <span class=\"keyword\">table</span> teacher02 <span class=\"keyword\">like</span> teacher;</span><br><span class=\"line\"><span class=\"comment\">-- 复制一张teacher02表，其结构和teacher表相同，但没有teacher里的内容；</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"修改表\"><a class=\"markdownIt-Anchor\" href=\"#修改表\">#</a> 修改表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 增加字段：add</span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">add</span> age <span class=\"built_in\">int</span> <span class=\"literal\">null</span>; <span class=\"comment\">-- 添加age列，int类型，可以为null；  </span></span><br><span class=\"line\"></span><br><span class=\"line\">2. 删除字段：<span class=\"keyword\">drop</span></span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">drop</span> age; <span class=\"comment\">-- 删除age列；  </span></span><br><span class=\"line\"></span><br><span class=\"line\">3.修改字段：<span class=\"keyword\">change</span></span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">change</span> <span class=\"keyword\">name</span> teacher_name <span class=\"built_in\">varchar</span>(<span class=\"number\">30</span>) <span class=\"keyword\">not</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 修改name列为teacher_name，varchar类型最大30个字符，不能为null；</span></span><br><span class=\"line\"></span><br><span class=\"line\">4. 增加主键：add primary key()</span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">add</span> primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>); <span class=\"comment\">-- 设置id为主键（id是已有字段）；</span></span><br><span class=\"line\"></span><br><span class=\"line\">5. 修改表名：<span class=\"keyword\">rename</span> <span class=\"keyword\">to</span></span><br><span class=\"line\">Eg: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> teacher <span class=\"keyword\">rename</span> <span class=\"keyword\">to</span> <span class=\"keyword\">user</span>; <span class=\"comment\">-- 把teacher表改名为user；</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"数据完整性\"><a class=\"markdownIt-Anchor\" href=\"#数据完整性\">#</a> 数据完整性</h2>\n<p><code>数据完整性的概念：确保数据正确性和一致性的机制。</code></p>\n<ol>\n<li>域完整性：即列的完整性。如：年龄不能超过 150 岁，id 不能为 null。</li>\n<li>实体完整性：即行的完整性。如：实体 “张三” 具有区别于实体 “李四” 的特征。</li>\n<li>参照完整性：主关系表（被参照表）和从关系表（参照表）中数据的一致性。</li>\n<li>用户定义完整性：用户根据具体需求来定义约束条件。</li>\n</ol>\n<h2 id=\"使用sql语句为表创建和删除约束\"><a class=\"markdownIt-Anchor\" href=\"#使用sql语句为表创建和删除约束\">#</a> 使用 SQL 语句为表创建和删除约束</h2>\n<p>如果要修改已创建的约束，最简单实用的方式就是先删除已有的约束，再建立同名的约束。</p>\n<h3 id=\"添加约束\"><a class=\"markdownIt-Anchor\" href=\"#添加约束\">#</a> 添加约束：</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">格式：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">add</span> [<span class=\"keyword\">constraint</span>] [约束名称] 约束类型（约束内容[可多个字段]）;</span><br></pre></td></tr></table></figure>\n<h4 id=\"主键约束\"><a class=\"markdownIt-Anchor\" href=\"#主键约束\">#</a> 主键约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">主键约束: </span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> PK_user_id primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 把user表的id添加主键约束，约束名称是PK_user_id。（PK是主键的简写）</span></span><br><span class=\"line\"></span><br><span class=\"line\">设置联合主键的方式：</span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"keyword\">user</span> <span class=\"keyword\">add</span> primary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>，<span class=\"keyword\">name</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 设置了联合主键id和name； 补充： 在创建表的时候也可以直接设置主键约束。</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"唯一约束\"><a class=\"markdownIt-Anchor\" href=\"#唯一约束\">#</a> 唯一约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">唯一约束：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">add</span> [<span class=\"keyword\">constraint</span>] <span class=\"keyword\">unique</span>(<span class=\"keyword\">id</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"默认约束\"><a class=\"markdownIt-Anchor\" href=\"#默认约束\">#</a> 默认约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">默认约束：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">alter</span> <span class=\"keyword\">column</span>列名 <span class=\"keyword\">set</span> <span class=\"keyword\">DEFAULT</span> 默认值;</span><br><span class=\"line\"><span class=\"comment\">-- 默认值可以为常量或者为空（null）；</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"检查约束\"><a class=\"markdownIt-Anchor\" href=\"#检查约束\">#</a> 检查约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">检查约束：（与SQL Server中的检查约束有语法区别）可以使用**枚举**。</span><br><span class=\"line\">Eg：<span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student ( ...... sex **enum**(‘男’, ‘女’) <span class=\"keyword\">not</span></span><br><span class=\"line\"><span class=\"literal\">null</span> <span class=\"comment\">-- 学员性别 );</span></span><br><span class=\"line\"><span class=\"comment\">-- 默认值可以为常量或者为空（null）；</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"外键约束\"><a class=\"markdownIt-Anchor\" href=\"#外键约束\">#</a> 外键约束</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">外键约束： 格式：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> 约束名称 约束类型;</span><br><span class=\"line\">(外键约束简称为“FK”)</span><br><span class=\"line\">Eg：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> FK_student_class_classid <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span> (classid) <span class=\"keyword\">references</span> <span class=\"keyword\">class</span>(classid);</span><br><span class=\"line\"><span class=\"comment\">-- 为student表所在的班级字段classid设置了外键约束。</span></span><br><span class=\"line\"></span><br><span class=\"line\">创建时设置外键：</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> student ( </span><br><span class=\"line\">...... </span><br><span class=\"line\">classid <span class=\"built_in\">int</span> <span class=\"keyword\">not</span> <span class=\"literal\">null</span>, <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span>(classid) <span class=\"keyword\">references</span> <span class=\"keyword\">class</span>(classid) </span><br><span class=\"line\"><span class=\"comment\">-- 设置名称为classid的外键，指向class表的classid； </span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h4 id=\"设置级联操作\"><a class=\"markdownIt-Anchor\" href=\"#设置级联操作\">#</a> 设置级联操作</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设置级联操作：</span><br><span class=\"line\">restrict和no action表示在子表有关联记录的情况下父表不能更新；</span><br><span class=\"line\">cascade 表示父表在更新或者删除时，同时更新或删除子表对应的记录；</span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"literal\">null</span> 表示父表在更新或者删除时，子表对应的字段设置为<span class=\"literal\">null</span>；</span><br><span class=\"line\"></span><br><span class=\"line\">Eg：</span><br><span class=\"line\">(<span class=\"number\">1</span>).alter <span class=\"keyword\">table</span> student <span class=\"keyword\">add</span> <span class=\"keyword\">constraint</span> FK_student_class_classid <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span> (classid) <span class=\"keyword\">references</span> <span class=\"keyword\">class</span>(classid) <span class=\"keyword\">on</span> <span class=\"keyword\">delete</span> <span class=\"keyword\">set</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 如：删除class表中classid=1对应的字段时，student表中的classid字段的值设置为null</span></span><br><span class=\"line\"></span><br><span class=\"line\">(2).alter table student add constraint FK_student_class_classid foreign key (classid) references class(classid) on <span class=\"keyword\">delete</span> <span class=\"keyword\">set</span> <span class=\"keyword\">cascade</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 如：删除class表中classid=1对应的字段时，同时删除student表中所有classid=1的该行数据。</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"删除约束\"><a class=\"markdownIt-Anchor\" href=\"#删除约束\">#</a> 删除约束</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法：<span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> 表名 <span class=\"keyword\">drop</span> [<span class=\"keyword\">constraint</span>] 约束名称;</span><br><span class=\"line\"><span class=\"comment\">-- constraint关键字可省略 -- 如果将表删除了，那么相关的约束也就删除了。</span></span><br><span class=\"line\"></span><br><span class=\"line\">Eg01: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student <span class=\"keyword\">drop</span> primary <span class=\"keyword\">key</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 存在一个主键约束，可用此操作；</span></span><br><span class=\"line\"></span><br><span class=\"line\">Eg02: <span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> student <span class=\"keyword\">drop</span> <span class=\"keyword\">foreign</span> <span class=\"keyword\">key</span> FK_class_student_id；</span><br><span class=\"line\"><span class=\"comment\">-- 删除外键</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"数据操作\"><a class=\"markdownIt-Anchor\" href=\"#数据操作\">#</a> 数据操作</h2>\n<h3 id=\"插入数据\"><a class=\"markdownIt-Anchor\" href=\"#插入数据\">#</a> 插入数据：</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">--（最常用）</span></span><br><span class=\"line\"><span class=\"comment\">-- 插入值的顺序必须与表中字段的顺序完全一致。</span></span><br><span class=\"line\">1. &quot;insert...values&quot;</span><br><span class=\"line\">语法：<span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> 表名 <span class=\"keyword\">values</span>(值);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--插入一行数据</span></span><br><span class=\"line\">Eg01: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">values</span> (<span class=\"number\">1</span>, ‘zhangsan’ );</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--插入多行数据，用逗号隔开；</span></span><br><span class=\"line\">Eg02: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">values</span> (<span class=\"number\">2</span>,‘jack’)，(<span class=\"number\">3</span>, ‘rose’);</span><br><span class=\"line\"></span><br><span class=\"line\">补充：当插入的记录会引发主键或唯一约束冲突时，可以用 **on duplicate key update** 条件。</span><br><span class=\"line\">Eg: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">values</span> (<span class=\"number\">1</span>, ‘mike’ ) **<span class=\"keyword\">on</span> <span class=\"keyword\">duplicate</span> <span class=\"keyword\">key</span> <span class=\"keyword\">update</span> <span class=\"keyword\">id</span> =<span class=\"number\">10</span>**;</span><br><span class=\"line\"><span class=\"comment\">-- 由于id是主键，id=1与上面zhangsan行冲突，所以自动把zhangsan的id设置为10，然后再把id=1的mike数据插入进去；</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 按照每一列对应的值插入数据</span></span><br><span class=\"line\">2. ”insert...set”</span><br><span class=\"line\">语法：<span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> 表名 <span class=\"keyword\">set</span> 列名<span class=\"number\">1</span>=值<span class=\"number\">1</span>, 列名<span class=\"number\">2</span>=值<span class=\"number\">2</span>,......;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--插入的数据是：id为5，姓名’abc’ 3）”insert...select”</span></span><br><span class=\"line\"><span class=\"comment\">-- 把从其他表查询到的数据插入到该表中，类似于like属性 Eg01: insert into user</span></span><br><span class=\"line\">Eg01: <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> student <span class=\"keyword\">set</span> <span class=\"keyword\">id</span> =<span class=\"number\">5</span>, <span class=\"keyword\">name</span>=’abc’;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">--把从student中查询到的数据插入到user中；</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> student;</span><br></pre></td></tr></table></figure>\n<h3 id=\"更新数据\"><a class=\"markdownIt-Anchor\" href=\"#更新数据\">#</a> 更新数据</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">格式：<span class=\"keyword\">update</span> 表名 <span class=\"keyword\">set</span> 列名<span class=\"number\">1</span>=值<span class=\"number\">1</span> [,列名<span class=\"number\">2</span>=值<span class=\"number\">2</span>,......] [where...] [<span class=\"keyword\">order</span> by...] [<span class=\"keyword\">limit</span> 行数]</span><br><span class=\"line\"><span class=\"comment\">--把id=3的列的name改为wangwu；</span></span><br><span class=\"line\">eg： <span class=\"keyword\">update</span> student <span class=\"keyword\">set</span> <span class=\"keyword\">name</span> = <span class=\"string\">&#x27;wangwu&#x27;</span> <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">003</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除数据\"><a class=\"markdownIt-Anchor\" href=\"#删除数据\">#</a> 删除数据</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">格式：<span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> 表名 <span class=\"keyword\">where</span> 列名=值；</span><br><span class=\"line\"><span class=\"comment\">--删除id＝３的列的数据。</span></span><br><span class=\"line\">eg：<span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> student <span class=\"keyword\">where</span> <span class=\"keyword\">id</span>=<span class=\"number\">3</span>；</span><br></pre></td></tr></table></figure>",
            "tags": [
                "MySQL",
                "增删改查"
            ]
        }
    ]
}