{
    "version": "https://jsonfeed.org/version/1",
    "title": "尺萤之光 • All posts by \"学习笔记\" tag",
    "description": "一个收藏回忆记录成长的地方...",
    "home_page_url": "https://miraitowa.cc",
    "items": [
        {
            "id": "https://miraitowa.cc/post/87f78bf4.html",
            "url": "https://miraitowa.cc/post/87f78bf4.html",
            "title": "MySQL 触发器",
            "date_published": "2020-09-30T07:01:04.000Z",
            "content_html": "<h2 id=\"MySQL-触发器\">MySQL 触发器</h2>\n<h4 id=\"触发器定义与用法实例\">触发器定义与用法实例</h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> 触发器名称             <span class=\"comment\">--触发器必须有名字，最多64个字符，可能后面会附有分隔符.它和MySQL中其他对象的命名方式基本相象.</span></span><br><span class=\"line\">&#123; <span class=\"keyword\">BEFORE</span> | <span class=\"keyword\">AFTER</span> &#125;                   <span class=\"comment\">--触发器有执行的时间设置：可以设置为事件发生前或后。</span></span><br><span class=\"line\">&#123; <span class=\"keyword\">INSERT</span> | <span class=\"keyword\">UPDATE</span> | <span class=\"keyword\">DELETE</span> &#125;         <span class=\"comment\">--同样也能设定触发的事件：它们可以在执行insert、update或delete的过程中触发。</span></span><br><span class=\"line\"><span class=\"keyword\">ON</span> 表名称                            <span class=\"comment\">--触发器是属于某一个表的:当在这个表上执行插入、 更新或删除操作的时候就导致触发器的激活. 我们不能给同一张表的同一个事件安排两个触发器。</span></span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span>                         <span class=\"comment\">--触发器的执行间隔：FOR EACH ROW子句通知触发器 每隔一行执行一次动作，而不是对整个表执行一次。</span></span><br><span class=\"line\">&lt;触发器<span class=\"keyword\">SQL</span>语句&gt;                      <span class=\"comment\">--触发器包含所要触发的SQL语句：这里的语句可以是任何合法的语句， 包括复合语句，但是这里的语句受的限制和函数的一样。</span></span><br></pre></td></tr></table></figure>\n<p><strong>实例准备工作</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建表tab1</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tab1(</span><br><span class=\"line\">  tab1_id <span class=\"built_in\">varchar</span>(<span class=\"number\">11</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"><span class=\"comment\">-- 创建表tab2</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> tab2;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> tab2(</span><br><span class=\"line\">  tab2_id <span class=\"built_in\">varchar</span>(<span class=\"number\">11</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实例1：新增一条，触发另外一张表的新增</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建触发器:t_afterinsert_on_tab1</span></span><br><span class=\"line\"><span class=\"comment\">-- 作用：增加tab1表记录后自动将记录增加到tab2表中</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> t_afterinsert_on_tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> t_afterinsert_on_tab1</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">ON</span> tab1</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">   <span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tab2(tab2_id) <span class=\"keyword\">values</span>(new.tab1_id);</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 测试一下</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> tab1(tab1_id) <span class=\"keyword\">values</span>(<span class=\"string\">&#x27;0001&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">-- 看看结果</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab2</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实例2：删除一条，触发另外一张表的删除</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建触发器:t_afterdelete_on_tab1</span></span><br><span class=\"line\"><span class=\"comment\">-- 作用：删除tab1表记录后自动将tab2表中对应的记录删去</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> t_afterdelete_on_tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> t_afterdelete_on_tab1</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">DELETE</span> <span class=\"keyword\">ON</span> tab1</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">   <span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> tab2 <span class=\"keyword\">where</span> tab2_id=old.tab1_id;</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 测试一下</span></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> tab1 <span class=\"keyword\">WHERE</span> tab1_id=<span class=\"string\">&#x27;0001&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 看看结果</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab2;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实例3：更新一条，触发另外一张表的更新</li>\n</ul>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建触发器:t_afterupdate_on_tab1</span></span><br><span class=\"line\"><span class=\"comment\">-- 作用：修改tab1表记录后自动将tab2表中对应的记录更新</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> t_afterupdate_on_tab1;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> t_afterupdate_on_tab1</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">UPDATE</span> <span class=\"keyword\">ON</span> tab1</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\">   <span class=\"keyword\">update</span> tab2 <span class=\"keyword\">set</span> tab2_id=new.tab1_id <span class=\"keyword\">where</span> tab2_id=old.tab1_id;</span><br><span class=\"line\"><span class=\"keyword\">END</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 测试一下</span></span><br><span class=\"line\"><span class=\"keyword\">update</span> tab1 <span class=\"keyword\">set</span> tab1_id=<span class=\"string\">&#x27;0002&#x27;</span> <span class=\"keyword\">WHERE</span> tab1_id=<span class=\"string\">&#x27;0001&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 看看结果</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab1;</span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> tab2;</span><br></pre></td></tr></table></figure>\n<h4 id=\"课后习题\">课后习题</h4>\n<blockquote>\n<p>1、在 product 表上分别创建 BEFORE INSERT 、 AFTER UPDATE 和 AFTER DELETE 3 个触<br>\n发器，触发器名称分别为 product_bf_insert 、 product_af_update 和 product_af_del 。执行语句部分都是向 operate 表插入操作方法和操作时间。<br>\n2、对 product 表分别执行 INSERT 、 UPDATE 和 DELETE 操作<br>\n3、删除 product_bf_insert 和 product_af_update 这两个触发器</p>\n</blockquote>\n<h4 id=\"题解代码\">题解代码</h4>\n<p><strong>建立 operate和product表 并向product表中插入数据</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 建表 operate</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> <span class=\"string\">`operate`</span>;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`operate`</span> (</span><br><span class=\"line\">  <span class=\"string\">`Op_id`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;编号&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Op_type`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;操作方式&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Op_time`</span> <span class=\"built_in\">time</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;操作时间&#x27;</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`Op_id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`Op_id`</span> (<span class=\"string\">`Op_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 建表 product</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> <span class=\"string\">`product`</span>;</span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`product`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;产品编号&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;产品名称&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Function`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;产品功能&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Company`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;生产厂家&#x27;</span>,</span><br><span class=\"line\">  <span class=\"string\">`Address`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">&#x27;家庭住址&#x27;</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`id`</span> (<span class=\"string\">`id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> product(<span class=\"keyword\">id</span>,<span class=\"string\">`NAME`</span>,<span class=\"string\">`Function`</span>,Company,Address) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">\t(<span class=\"number\">1</span>,<span class=\"string\">&#x27;Strawberry&#x27;</span>,<span class=\"string\">&#x27;通便&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;北京&#x27;</span>),</span><br><span class=\"line\">\t(<span class=\"number\">2</span>,<span class=\"string\">&#x27;Watermelon&#x27;</span>,<span class=\"string\">&#x27;利尿&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;杭州&#x27;</span>),</span><br><span class=\"line\">\t(<span class=\"number\">3</span>,<span class=\"string\">&#x27;cherry&#x27;</span>,<span class=\"string\">&#x27;养颜驻容&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;深圳&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p><strong>触发器的创建</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 创建 BEFORE INSERT 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> product_bf_insert</span><br><span class=\"line\"><span class=\"keyword\">BEFORE</span> <span class=\"keyword\">INSERT</span> <span class=\"keyword\">on</span> product</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> operate <span class=\"keyword\">VALUES</span>(<span class=\"literal\">NULL</span>,<span class=\"string\">&#x27;数据插入成功！&#x27;</span>,<span class=\"built_in\">TIME</span>(<span class=\"keyword\">NOW</span>()));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> product(<span class=\"keyword\">id</span>,<span class=\"string\">`NAME`</span>,<span class=\"string\">`Function`</span>,Company,Address) <span class=\"keyword\">VALUES</span></span><br><span class=\"line\">\t(<span class=\"number\">4</span>,<span class=\"string\">&#x27;peach&#x27;</span>,<span class=\"string\">&#x27;补益气血，养阴生津&#x27;</span>,<span class=\"string\">&#x27;中国&#x27;</span>,<span class=\"string\">&#x27;北京&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建 AFTER UPDATE 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> product_af_update</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">UPDATE</span> <span class=\"keyword\">on</span> product</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> operate <span class=\"keyword\">VALUES</span>(<span class=\"literal\">NULL</span>,<span class=\"string\">&#x27;数据更新成功！&#x27;</span>,<span class=\"built_in\">TIME</span>(<span class=\"keyword\">NOW</span>()));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 更新数据</span></span><br><span class=\"line\"><span class=\"keyword\">UPDATE</span> product <span class=\"keyword\">SET</span> Address=<span class=\"string\">&#x27;北京海淀区&#x27;</span> <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span>=<span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 创建 AFTER DELETE 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TRIGGER</span> product_af_del</span><br><span class=\"line\"><span class=\"keyword\">AFTER</span> <span class=\"keyword\">DELETE</span> <span class=\"keyword\">on</span> product</span><br><span class=\"line\"><span class=\"keyword\">FOR</span> <span class=\"keyword\">EACH</span> <span class=\"keyword\">ROW</span></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> operate <span class=\"keyword\">VALUES</span>(<span class=\"literal\">NULL</span>,<span class=\"string\">&#x27;数据删除成功！&#x27;</span>,<span class=\"built_in\">TIME</span>(<span class=\"keyword\">NOW</span>()));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">-- 删除数据</span></span><br><span class=\"line\"><span class=\"keyword\">DELETE</span> <span class=\"keyword\">FROM</span> product <span class=\"keyword\">WHERE</span> <span class=\"keyword\">id</span>=<span class=\"number\">4</span>;</span><br></pre></td></tr></table></figure>\n<p><strong>删除触发器</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 删除 product_bf_insert 和 product_af_update 触发器</span></span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> product_bf_insert;</span><br><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TRIGGER</span> product_af_update;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "MySQL",
                "学习笔记",
                "Trigger"
            ]
        }
    ]
}