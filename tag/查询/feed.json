{
    "version": "https://jsonfeed.org/version/1",
    "title": "寻梦启事 • All posts by \"查询\" tag",
    "description": "",
    "home_page_url": "http://eliauk.cc",
    "items": [
        {
            "id": "http://eliauk.cc/mysql-inquire/",
            "url": "http://eliauk.cc/mysql-inquire/",
            "title": "MySQL 查询",
            "date_published": "2020-09-14T11:04:03.000Z",
            "content_html": "<h2 id=\"连接查询\"><a class=\"markdownIt-Anchor\" href=\"#连接查询\">#</a> 连接查询</h2>\n<p><strong>在数据库中 join 操作被称为连接，作用是能连接多个表的数据（通过连接条件），从多个表中获取数据合并在一起作为结果集返回给客户端。</strong></p>\n<h3 id=\"交叉连接\"><a class=\"markdownIt-Anchor\" href=\"#交叉连接\">#</a> 交叉连接</h3>\n<p><strong>交叉连接：将两张表的数据与另外一张表彼此交叉</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">cross</span> <span class=\"hljs-keyword\">join</span> 表<span class=\"hljs-number\">2</span><br>eg：<br><span class=\"hljs-keyword\">select</span> class.cname, student.sname <span class=\"hljs-keyword\">from</span> student <span class=\"hljs-keyword\">cross</span> <span class=\"hljs-keyword\">join</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-keyword\">on</span> class.cid =<br>student.classid;<br><span class=\"hljs-comment\">--其中的on代表两个表的连接条件</span><br></code></pre></td></tr></table></figure>\n<h3 id=\"内连接\"><a class=\"markdownIt-Anchor\" href=\"#内连接\">#</a> 内连接</h3>\n<p><img src=\"https://usocute.oss-cn-chengdu.aliyuncs.com/hexo/inner-join.png\" alt=\"inner-join\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\">方式一：<br><span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">1</span>,表<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">where</span> 表<span class=\"hljs-number\">1.</span>列=表<span class=\"hljs-number\">2.</span>列<br>方式二：<br><span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">inner</span> <span class=\"hljs-keyword\">join</span> 表<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">on</span> 表<span class=\"hljs-number\">1.</span>列=表<span class=\"hljs-number\">2.</span>列<br></code></pre></td></tr></table></figure>\n<h3 id=\"外连接\"><a class=\"markdownIt-Anchor\" href=\"#外连接\">#</a> 外连接</h3>\n<h4 id=\"左连接\"><a class=\"markdownIt-Anchor\" href=\"#左连接\">#</a> 左连接</h4>\n<p>左连接基础语法是  <code>a left outer join b </code> ，其中的  <code>outer</code>  可以省略，与内连接相比就是在与内连接相<br>\n同条件下，在内连接的结果集中添加 <code>a</code>  表在 <code>b</code>  表中找不到匹配的记录，换句话说就是，结果集中会包含 <code>a</code>  表中的所有记录，如果 <code>b</code>  表中有匹配的记录就出现在结果集，否则使用  <code>NULL</code>  代替，也就是把 <code>a</code>  表看成根本，不可缺失记录。<br>\n<img src=\"https://usocute.oss-cn-chengdu.aliyuncs.com/hexo/left-join.png\" alt=\"left-join\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">left</span> <span class=\"hljs-keyword\">join</span> 表<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">on</span> 表<span class=\"hljs-number\">1.</span>列=表<span class=\"hljs-number\">2.</span>列<br></code></pre></td></tr></table></figure>\n<h4 id=\"右连接\"><a class=\"markdownIt-Anchor\" href=\"#右连接\">#</a> 右连接</h4>\n<p>右外连接基础语法是  <code>a right outer join b </code> ，其中的  <code>outer</code>  可以省略，与内连接相比就是在与内连<br>\n接相同条件下，在内连接的结果集中添加 b 表在 a 表中找不到匹配的记录，换句话说就是，结果集中会包含 b 表中的所有记录，如果 a 表中有匹配的记录就出现在结果集，否则使用 NULL 代替，也就是把 b 表看成根本，不可缺失记录，作用与左外连接恰好相反。<br>\n<img src=\"https://usocute.oss-cn-chengdu.aliyuncs.com/hexo/right-join.png\" alt=\"right-join\"></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">right</span> <span class=\"hljs-keyword\">join</span> 表<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">on</span> 表<span class=\"hljs-number\">1.</span>列=表<span class=\"hljs-number\">2.</span>列<br></code></pre></td></tr></table></figure>\n<h3 id=\"自连接\"><a class=\"markdownIt-Anchor\" href=\"#自连接\">#</a> 自连接</h3>\n<p>自连接就是表与它自身相关联，进行自连接时通过给表起不同的别名来区分一个表的两个实例。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">select</span> 表.字段<span class=\"hljs-number\">1</span>,表.字段<span class=\"hljs-number\">2</span>,表.字段<span class=\"hljs-number\">3</span> <br><span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">as</span> 别名,表<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">as</span> 别名 <br><span class=\"hljs-keyword\">where</span> 别名.字段<span class=\"hljs-number\">2</span>=别名<span class=\"hljs-number\">2.</span>字段<span class=\"hljs-number\">3</span>；<br></code></pre></td></tr></table></figure>\n<h2 id=\"子查询\"><a class=\"markdownIt-Anchor\" href=\"#子查询\">#</a> 子查询</h2>\n<p>子查询指嵌套在查询内部，且必须始终出现在圆括号。子查询可以包含多个关键字或条件，如<br>\n <code>DISTINCT</code> 、 <code>GROUP BY</code> 、 <code>ORDER BY</code> 、 <code>LIMIT</code> 、 <code>函数</code> 等。<br>\n子查询的外层查询可以是： <code>SELECT</code> ， <code>INSERT</code> ， <code>UPDATE</code> ， <code>SET或DO</code> 。<br>\n子查询可以返回标量，一行，一列或子查询。</p>\n<h3 id=\"将子查询作为派生表\"><a class=\"markdownIt-Anchor\" href=\"#将子查询作为派生表\">#</a> 将子查询作为派生表</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">select</span> * <span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">where</span> 字段<span class=\"hljs-number\">1</span> = （<span class=\"hljs-keyword\">select</span> 字段<span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">from</span> 表<span class=\"hljs-number\">2</span>）;<br></code></pre></td></tr></table></figure>\n<h3 id=\"把子查询用在where子句中\"><a class=\"markdownIt-Anchor\" href=\"#把子查询用在where子句中\">#</a> 把子查询用在 where 子句中</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\">eg：<br><span class=\"hljs-keyword\">select</span> ename,sal <span class=\"hljs-keyword\">from</span> emp <span class=\"hljs-keyword\">where</span> sal&gt;(<span class=\"hljs-keyword\">select</span> <span class=\"hljs-keyword\">avg</span>(sal) <span class=\"hljs-keyword\">form</span> emp);<br></code></pre></td></tr></table></figure>\n<h3 id=\"在from语句中使用子查询\"><a class=\"markdownIt-Anchor\" href=\"#在from语句中使用子查询\">#</a> 在 from 语句中使用子查询</h3>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\">eg：<br><span class=\"hljs-keyword\">select</span> t.deptno,t.avgsal,s.grade<br><span class=\"hljs-keyword\">from</span> (<span class=\"hljs-keyword\">select</span> deptno,<span class=\"hljs-keyword\">avg</span>(sal) <span class=\"hljs-keyword\">as</span> avgsal <span class=\"hljs-keyword\">from</span> emp <span class=\"hljs-keyword\">group</span> <span class=\"hljs-keyword\">by</span> deptno) t<br><span class=\"hljs-keyword\">join</span> salgrade s<br><span class=\"hljs-keyword\">on</span> t.avgsal <span class=\"hljs-keyword\">between</span> s.losal <span class=\"hljs-keyword\">and</span> s.hisal;<br></code></pre></td></tr></table></figure>\n<h2 id=\"集合操作union\"><a class=\"markdownIt-Anchor\" href=\"#集合操作union\">#</a> 集合操作 (UNION)</h2>\n<p><strong>union  作用：合并查询结果集</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\">Eg：<br><span class=\"hljs-keyword\">select</span> ename,job <span class=\"hljs-keyword\">from</span> emp <span class=\"hljs-keyword\">where</span> job=<span class=\"hljs-string\">&#x27;manager&#x27;</span><br><span class=\"hljs-keyword\">union</span><br><span class=\"hljs-keyword\">select</span> ename,job <span class=\"hljs-keyword\">from</span> emp <span class=\"hljs-keyword\">where</span> job=<span class=\"hljs-string\">&#x27;salesman&#x27;</span>;<br></code></pre></td></tr></table></figure>\n<p><strong>limit</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\">limit 起始下标，长度<br>如果起始下标没有指定，默认从0开始，0表示表中第一条记录。<br>Eg：<br><span class=\"hljs-comment\">--按照工资降序排列取前5个</span><br><span class=\"hljs-keyword\">select</span> ename,sal <span class=\"hljs-keyword\">from</span> emp <span class=\"hljs-keyword\">order</span> <span class=\"hljs-keyword\">by</span> sal <span class=\"hljs-keyword\">desc</span> <span class=\"hljs-keyword\">limit</span> <span class=\"hljs-number\">5</span>;<br></code></pre></td></tr></table></figure>\n<p><strong>通用的分页 SQL (只适用于 mysql 数据库管理系统)</strong></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">select</span> t.* <span class=\"hljs-keyword\">from</span> t<br><span class=\"hljs-keyword\">order</span> <span class=\"hljs-keyword\">by</span> t.x <span class=\"hljs-keyword\">desc</span>/<span class=\"hljs-keyword\">asc</span><br><span class=\"hljs-keyword\">limit</span> (pageNo<span class=\"hljs-number\">-1</span>)*pageSize,pageSize;<br></code></pre></td></tr></table></figure>\n",
            "tags": [
                "MySQL",
                "数据库",
                "查询"
            ]
        }
    ]
}